webpackJsonp([1],{"+4Vw":function(t,e){},"+C2c":function(t,e){},"/VG+":function(t,e){},0:function(t,e){},"05Hr":function(t,e){},1:function(t,e){},2:function(t,e){},3:function(t,e){},"3Fj2":function(t,e){},"3qNC":function(t,e){},4:function(t,e){},"4Ab2":function(t,e){},5:function(t,e){},Didw:function(t,e,i){t.exports=i.p+"static/img/login.39be942.jpg"},DzyS:function(t,e){},FXTS:function(t,e){},HtnR:function(t,e){},JCuX:function(t,e){},Kb46:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),o=i("mtWM"),s=i.n(o),a="http://10.160.8.21:18081/system/mobile",r={base:""+a,mqttUrl:"ws://10.160.84.191:18080/mqtt",getList:a+"/getList",msgList:a+"/msgList",report:a+"/addReport",login:a+"/login",getDetail:a+"/getDetail",msgDetail:a+"/msgDetail"},l={name:"App",mounted:function(){console.log("APP=================");var t=window.nativejs.getUserInfo();console.log(t),console.log("====================="),t&&(t=JSON.parse(t),this.$store.commit("changeUserObj",t),s()({url:r.report,method:"post",data:{type:"2",user:t.data.id}}))},methods:{}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var u=i("VU/8")(l,c,!1,function(t){i("+C2c"),i("3qNC")},null,null).exports,d=i("/ocq"),p=i("//Fk"),h=i.n(p),f=i("mvHQ"),v=i.n(f),m=i("Xxa5"),g=i.n(m),w=i("BO1k"),x=i.n(w),y=i("exGp"),_=i.n(y),b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-tab"},[this._t("header"),this._v(" "),e("div",{ref:"viewBoxBody",staticClass:"weui-tab__panel vux-fix-safari-overflow-scrolling",style:{paddingTop:this.bodyPaddingTop,paddingBottom:this.bodyPaddingBottom},attrs:{id:"vux_view_box_body"}},[this._t("default")],2),this._v(" "),this._t("bottom")],2)},staticRenderFns:[]};var S=i("VU/8")({name:"view-box",props:["bodyPaddingTop","bodyPaddingBottom"],methods:{scrollTo:function(t){this.$refs.viewBoxBody.scrollTop=t},getScrollTop:function(){return this.$refs.viewBoxBody.scrollTop},getScrollBody:function(){return this.$refs.viewBoxBody}}},b,!1,function(t){i("05Hr")},null,null).exports,k=i("BEQ0"),C=i.n(k),$=(Object,String,String,Object,{name:"x-header",props:{leftOptions:Object,title:String,transition:String,rightOptions:{type:Object,default:function(){return{showMore:!1}}}},beforeMount:function(){this.$slots["overwrite-title"]&&(this.shouldOverWriteTitle=!0)},computed:{_leftOptions:function(){return C()({showBack:!0,preventGoBack:!1},this.leftOptions||{})}},methods:{onClickBack:function(){this._leftOptions.preventGoBack?this.$emit("on-click-back"):this.$router?this.$router.back():window.history.back()}},data:function(){return{shouldOverWriteTitle:!1}}}),O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-header"},[i("div",{staticClass:"vux-header-left"},[t._t("overwrite-left",function(){return[i("transition",{attrs:{name:t.transition}},[i("a",{directives:[{name:"show",rawName:"v-show",value:t._leftOptions.showBack,expression:"_leftOptions.showBack"}],staticClass:"vux-header-back",on:{click:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"preventDefault",void 0,e.key,void 0))return null},t.onClickBack]}},[t._v(t._s(void 0===t._leftOptions.backText?"返回":t._leftOptions.backText))])]),t._v(" "),i("transition",{attrs:{name:t.transition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t._leftOptions.showBack,expression:"_leftOptions.showBack"}],staticClass:"left-arrow",on:{click:t.onClickBack}})])]}),t._v(" "),t._t("left")],2),t._v(" "),t.shouldOverWriteTitle?t._e():i("h1",{staticClass:"vux-header-title",on:{click:function(e){return t.$emit("on-click-title")}}},[t._t("default",function(){return[i("transition",{attrs:{name:t.transition}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}]},[t._v(t._s(t.title))])])]})],2),t._v(" "),t.shouldOverWriteTitle?i("div",{staticClass:"vux-header-title-area"},[t._t("overwrite-title")],2):t._e(),t._v(" "),i("div",{staticClass:"vux-header-right"},[t.rightOptions.showMore?i("a",{staticClass:"vux-header-more",on:{click:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"preventDefault",void 0,e.key,void 0))return null},function(e){return t.$emit("on-click-more")}]}}):t._e(),t._v(" "),t._t("right")],2)])},staticRenderFns:[]};var B=i("VU/8")($,O,!1,function(t){i("JCuX")},null,null).exports,F=i("piuB"),L=(F.b,String,{mounted:function(){},name:"tabbar",mixins:[F.b],props:{iconClass:String}}),T={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"weui-tabbar"},[this._t("default")],2)},staticRenderFns:[]};var R=i("VU/8")(L,T,!1,function(t){i("NqEG")},null,null).exports,N=(String,Number,{name:"badge",props:{text:[String,Number]}}),I={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{class:["vux-badge",{"vux-badge-dot":void 0===this.text,"vux-badge-single":void 0!==this.text&&1===this.text.toString().length}],domProps:{textContent:this._s(this.text)}})},staticRenderFns:[]};var V=i("VU/8")(N,I,!1,function(t){i("X3Nh")},null,null).exports,U=(F.a,Boolean,String,String,Object,String,{name:"tabbar-item",components:{Badge:V},mounted:function(){this.$slots.icon||(this.simple=!0),this.$slots["icon-active"]&&(this.hasActiveIcon=!0)},mixins:[F.a],props:{showDot:{type:Boolean,default:!1},badge:String,link:[String,Object],iconClass:String},computed:{isActive:function(){return this.$parent.index===this.currentIndex}},data:function(){return{simple:!1,hasActiveIcon:!1}}}),j={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"weui-tabbar__item",class:{"weui-bar__item_on":t.isActive,"vux-tabbar-simple":t.simple},attrs:{href:"javascript:;"},on:{click:function(e){return t.onItemClick(!0)}}},[t.simple?t._e():i("div",{staticClass:"weui-tabbar__icon",class:[t.iconClass||t.$parent.iconClass,{"vux-reddot":t.showDot}]},[t.simple||t.hasActiveIcon&&t.isActive?t._e():t._t("icon"),t._v(" "),!t.simple&&t.hasActiveIcon&&t.isActive?t._t("icon-active"):t._e(),t._v(" "),t.badge?i("sup",[i("badge",{attrs:{text:t.badge}})],1):t._e()],2),t._v(" "),i("p",{staticClass:"weui-tabbar__label"},[t._t("label")],2)])},staticRenderFns:[]},D=i("VU/8")(U,j,!1,null,null,null).exports,A=i("fZjL"),M=i.n(A),E=i("+v63"),P=i("te2A"),q=(Boolean,String,String,Boolean,Boolean,Boolean,String,String,Object,Boolean,Boolean,Boolean,{name:"popup",props:{value:Boolean,height:{type:String,default:"auto"},width:{type:String,default:"auto"},showMask:{type:Boolean,default:!0},isTransparent:Boolean,hideOnBlur:{type:Boolean,default:!0},position:{type:String,default:"bottom"},maxHeight:String,popupStyle:Object,hideOnDeactivated:{type:Boolean,default:!0},shouldRerenderOnShow:{type:Boolean,default:!1},shouldScrollTopOnShow:{type:Boolean,default:!1}},created:function(){this.$vux&&this.$vux.config&&"VIEW_BOX"===this.$vux.config.$layout&&(this.layout="VIEW_BOX")},mounted:function(){var t=this;this.$overflowScrollingList=document.querySelectorAll(".vux-fix-safari-overflow-scrolling"),this.$nextTick(function(){var e=t;t.popup=new E.a({showMask:e.showMask,container:e.$el,hideOnBlur:e.hideOnBlur,onOpen:function(){e.fixSafariOverflowScrolling("auto"),e.show=!0},onClose:function(){e.show=!1,window.__$vuxPopups&&M()(window.__$vuxPopups).length>1||document.querySelector(".vux-popup-dialog.vux-popup-mask-disabled")||setTimeout(function(){e.fixSafariOverflowScrolling("touch")},300)}}),t.value&&t.popup.show(),t.initialShow=!1})},deactivated:function(){this.hideOnDeactivated&&(this.show=!1),this.removeModalClassName()},methods:{fixSafariOverflowScrolling:function(t){if(this.$overflowScrollingList.length)for(var e=0;e<this.$overflowScrollingList.length;e++)this.$overflowScrollingList[e].style.webkitOverflowScrolling=t},removeModalClassName:function(){"VIEW_BOX"===this.layout&&P.a.removeClass(document.body,"vux-modal-open")},doShow:function(){this.popup&&this.popup.show(),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),"VIEW_BOX"===this.layout&&P.a.addClass(document.body,"vux-modal-open"),this.hasFirstShow||(this.$emit("on-first-show"),this.hasFirstShow=!0)},scrollTop:function(){var t=this;this.$nextTick(function(){t.$el.scrollTop=0;var e=t.$el.querySelectorAll(".vux-scrollable");if(e.length)for(var i=0;i<e.length;i++)e[i].scrollTop=0})}},data:function(){return{layout:"",initialShow:!0,hasFirstShow:!1,shouldRenderBody:!0,show:this.value}},computed:{styles:function(){var t={};if(this.position&&"bottom"!==this.position&&"top"!==this.position?t.width=this.width:t.height=this.height,this.maxHeight&&(t["max-height"]=this.maxHeight),this.isTransparent&&(t.background="transparent"),this.popupStyle)for(var e in this.popupStyle)t[e]=this.popupStyle[e];return t}},watch:{value:function(t){this.show=t},show:function(t){var e=this;this.$emit("input",t),t?this.shouldRerenderOnShow?(this.shouldRenderBody=!1,this.$nextTick(function(){e.scrollTop(),e.shouldRenderBody=!0,e.doShow()})):(this.shouldScrollTopOnShow&&this.scrollTop(),this.doShow()):(this.$emit("on-hide"),this.show=!1,this.popup.hide(!1),setTimeout(function(){document.querySelector(".vux-popup-dialog.vux-popup-show")||e.fixSafariOverflowScrolling("touch"),e.removeModalClassName()},200))}},beforeDestroy:function(){this.popup&&this.popup.destroy(),this.fixSafariOverflowScrolling("touch"),this.removeModalClassName()}}),z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"vux-popup-animate-"+t.position}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show&&!t.initialShow,expression:"show && !initialShow"}],staticClass:"vux-popup-dialog",class:["vux-popup-"+t.position,t.show?"vux-popup-show":""],style:t.styles},[t.shouldRenderBody?t._t("default"):t._e()],2)])},staticRenderFns:[]};var H=i("VU/8")(q,z,!1,function(t){i("OZb3")},null,null).exports,W="appTest",J=function(){return new h.a(function(t,e){!function t(e,i){if(console.log("111111!!!!!!!!!!!!!!!"),cordova.file){console.log(cordova.file.externalRootDirectory+W+"/");var n=cordova.file.externalRootDirectory+"/",o=[];window.resolveLocalFileSystemURL(n,function(t){t.getDirectory(W,{create:!0},function(t){t.createReader().readEntries(function(t){if(t.length){var n=function(n){if(-1!==t[n].name.indexOf(".zip"))return"continue";try{t[n].getFile("version.txt",{create:!1,exclusive:!1},function(s){s.file(function(i){var s=new FileReader;s.onloadend=function(){var i=this.result;o.push(JSON.parse(i)),n==t.length-1&&(console.log(v()(o)),console.log(e),e(o))},s.onerror=function(){},s.readAsText(i)},function(t){i(t)})},function(t){i(t)})}catch(t){}};for(var s in t)n(s)}else e(o)},function(t){i(t)})})},function(t){console.log(v()(t))})}else setTimeout(function(){t(e,i)},1e3)}(t,e)})},X=i("KgVm"),G=i.n(X),Z={components:{ViewBox:S,XHeader:B,Tabbar:R,TabbarItem:D,Popup:H},data:function(){return{badge:"",selected:this.$route.path,showMenus:!1}},watch:{},mounted:function(){window.test=this,console.log("home111111111111111111111");var t="";window.localStorage.getItem("clientId")?t=window.localStorage.getItem("clientId"):(t="user"+parseInt(1e8*Math.random()),window.localStorage.setItem("clientId",t)),this.initWebSocket(t),this.computedMessageCount(),setTimeout(function(){test.checkAppUpdate()},2e3)},methods:{closeTab:function(){this.$router.replace("/app")},checkAppUpdate:function(){var t=this;return _()(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.nativejs.getUserInfo()||"",s.a.get(r.getList,{params:{filter:""}}).then(function(e){J().then(function(i){if(e&&e.data.result){var n=!0,o=!1,s=void 0;try{for(var a,r=x()(i);!(n=(a=r.next()).done);n=!0){var l=a.value,c=G()(e.data.result,{id:l.id});if(l.version!==e.data.result[c].version){console.log("11111111111");var u=t.$store.state.updatedApps;u.push(l),t.$store.commit("changeShowDot",u)}}}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}}else window.navigator.dialogsPlus.showNotice("服务器访问异常,请检查网络")})});case 2:case"end":return e.stop()}},e,t)}))()},computedMessageCount:function(t){var e=[];for(var i in t?e=t:window.localStorage.getItem("msgs")&&(e=JSON.parse(window.localStorage.getItem("msgs"))),e){var n=0;for(var o in e[i])e[i][o].hasRead||n++;this.$store.commit("changeMessageNum",{topic:i,num:n})}},initWebSocket:function(t){console.log("aaaaaaa");var e=this;window.client=window.mqtt.connect(r.mqttUrl,{clean:!1,clientId:t});var i={},n=window.nativejs.getUserInfo()||"";n&&((n=JSON.parse(n).data).uid=n.id,delete n.id,i.data=n),t&&(i.clientId=t),console.log("110000--------"),s()({url:r.login,method:"post",data:i}).then(function(t){console.log("------==========--------!!!!!!!========="),console.log(v()(t))}),setInterval(function(){var t=JSON.parse(window.nativejs.getDeviceInfo()),i=window.nativejs.getUserInfo();i&&window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory,function(n){var o=new Blob([t.lng||"0,"+t.lat||0],{type:"text/plain"}),s=new Blob([i],{type:"text/plain"});e.writeFile(n,s,"user.txt"),e.writeFile(n,o,"gps.txt")})},6e5),client.on("message",function(i,n,o,s){console.log(v()(o)),console.log(i.toString()+"--"+n.toString());var a=JSON.parse(n.toString()).clientId;if(console.log(t+"---"+a),console.log(a&&a!=t),!a||a==t){var r={};window.localStorage.getItem("msgs")&&(r=JSON.parse(window.localStorage.getItem("msgs"))),r[i]||(r[i]=[]),r[i].unshift(JSON.parse(n.toString())),window.localStorage.setItem("msgs",v()(r)),e.computedMessageCount(r);var l=JSON.parse(n.toString());cordova.plugins.notification.local.schedule({id:parseInt(1e8*Math.random()),title:l.name,text:l.msg}),window.onAppMessage&&window.onAppMessage(i,n)}})},writeFile:function(t,e,i){return new h.a(function(n,o){t.getFile(i,{create:!0,exclusive:!1},function(t){t.createWriter(function(t){t.onwriteend=function(){console.log("Successful file write..."),n("success")},t.onerror=function(t){console.log("Failed file write: "+t.toString()),o(t)},e||(e=new Blob(["some file data"],{type:"text/plain"})),t.write(e)})},function(t){o(t)})})},readFile:function(t){return new h.a(function(t,e){})}}},K={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%"}},[i("view-box",{ref:"viewBox",attrs:{"body-padding-top":"46px","body-padding-bottom":"0"}},[i("x-header",{ref:"headerBox",staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"100"},attrs:{slot:"header","left-options":{backText:"返回",showBack:t.$store.state.headerBack||!1},"right-options":{showMore:!0}},on:{"on-click-more":function(e){t.showMenus=!0}},slot:"header"},["应用窗口"==t.$route.name?i("span",{attrs:{slot:"left"},on:{click:t.closeTab},slot:"left"},[t._v("关闭")]):t._e(),t._v(" "),t._v("\n      "+t._s(t.$store.state.headerName||t.$route.name)+"\n      ")]),t._v(" "),i("div",{staticClass:"pageBox"},[i("router-view")],1),t._v(" "),i("popup",{attrs:{position:"bottom"},model:{value:t.showMenus,callback:function(e){t.showMenus=e},expression:"showMenus"}},[i("div",{staticClass:"position-vertical-demo",staticStyle:{padding:"7px"},on:{click:function(e){t.showMenus=!1}}},[i("x-button",{attrs:{type:"default",link:"/app"}},[t._v("应用")]),t._v(" "),i("x-button",{attrs:{type:"default",link:"/message"}},[t._v("消息")]),t._v(" "),i("x-button",{attrs:{type:"default",link:"/my"}},[t._v("我的")])],1)]),t._v(" "),i("tabbar",{attrs:{slot:"bottom",id:"tb"},slot:"bottom"})],1)],1)},staticRenderFns:[]};var Q=i("VU/8")(Z,K,!1,function(t){i("4Ab2")},null,null).exports,Y=i("kbi+"),tt=i.n(Y),et=i("kvU2"),it=i.n(et),nt={data:function(){return{text:"",dataList:[]}},mounted:function(){var t=this;return _()(g.a.mark(function e(){var i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t,console.log("========"),console.log(r.getList),J().then(function(e){console.log("app内dataList"),console.log(v()(e)),i.dataList=it()(e);window.nativejs.getUserInfo();s.a.get(r.getList,{params:{filter:""}}).then(function(n){if(n&&n.data){var o=[],s=!0,a=!1,r=void 0;try{for(var l,c=x()(n.data.result);!(s=(l=c.next()).done);s=!0){var u=l.value,d=tt()(e,{id:u.id});if(d){if(d.version!==u.version){var p=t.$store.state.updatedApps;p.push(u),t.$store.commit("changeShowDot",p)}o.push(d)}}}catch(t){a=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(a)throw r}}i.dataList=it()(o),console.log("请求回来dataList"),console.log(v()(i.dataList)),console.log("打印请求的列表： "+v()(i.dataList))}})}).catch(function(t){console.log(t)});case 4:case"end":return e.stop()}},e,t)}))()},methods:{open:function(t){this.$router.push({path:"/apps_frame",query:{url:encodeURIComponent(t.path+"/index.html"),name:t.name}})},turnSet:function(){this.$router.push({path:"setUp"})}},watch:{}},ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("audio",{ref:"audio",attrs:{src:i("XmeG")}}),t._v(" "),n("div",[t._v(t._s(t.text))]),t._v(" "),t._l(t.dataList,function(e,i){return n("div",{key:e.id,staticClass:"section"},[n("div",{staticClass:"sectionMain",on:{click:function(i){return t.open(e)}}},[n("img",{attrs:{src:e.path+"/"+e.picname,alt:""}}),t._v(" "),n("p",{staticStyle:{"font-size":"12px","line-height":"30px"}},[t._v(t._s(e.name))])])])}),t._v(" "),n("div",{staticClass:"section",on:{click:t.turnSet}},[n("div",{staticClass:"sectionMain",staticStyle:{display:"flex","flex-direction":"column","align-items":"center",position:"relative"}},[t._m(0),t._v(" "),n("p",{staticStyle:{"font-size":"12px","line-height":"30px"}},[t._v("\n        管理应用\n        "),t.$store.state.updatedApps.length>0?n("badge",{staticStyle:{position:"absolute",top:"20px",right:"20px"}}):t._e()],1)])])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{width:"60px",height:"60px","text-align":"center","line-height":"60px"}},[e("i",{staticClass:"icon iconfont icon-guanli",staticStyle:{"font-size":"60px"}})])}]};var st=i("VU/8")(nt,ot,!1,function(t){i("HtnR")},null,null).exports,at=i("woOf"),rt=i.n(at),lt={name:"apps_frame",data:function(){return{url:decodeURIComponent(this.$route.query.url)+"?str="+parseInt(1e7*Math.random())}},mounted:function(){var t=this;return _()(g.a.mark(function e(){var i,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(i=window.nativejs.getDeviceInfo())&&(i=JSON.parse(i)),n={type:"1",appname:t.$route.query.name,user:t.$store.state.userObj.data?t.$store.state.userObj.data.id:""},rt()(n,i),s()({url:r.report,method:"post",data:n}),t.$store.commit("changeHeaderName",t.$route.query.name),t.$store.commit("changeHeaderBack",!0),console.log("---------------------------"),window.app=t;case 9:case"end":return e.stop()}},e,t)}))()},beforeDestroy:function(){this.$store.commit("changeHeaderName",""),this.$store.commit("changeHeaderBack",!1)},methods:{}},ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"height:100%"},[e("iframe",{ref:"frames",staticStyle:{width:"100vw",height:"100%",overflow:"hidden"},attrs:{src:this.url,frameborder:"0"}})])},staticRenderFns:[]};var ut=i("VU/8")(lt,ct,!1,function(t){i("3Fj2")},"data-v-8895acd6",null).exports,dt=i("bOdI"),pt=i.n(dt),ht=i("KRg4"),ft=(ht.a,String,Boolean,String,String,String,Array,Boolean,String,String,Boolean,{name:"search",mixins:[ht.a],props:{type:{type:String,default:"search"},required:{type:Boolean,default:!1},placeholder:String,cancelText:String,value:{type:String,default:""},results:{type:Array,default:function(){return[]}},autoFixed:{type:Boolean,default:!0},top:{type:String,default:"0px"},position:{type:String,default:"fixed"},autoScrollToTop:Boolean},created:function(){this.value&&(this.currentValue=this.value)},computed:{fixPosition:function(){return this.isFixed?"absolute"===this.position?"absolute":"fixed":"static"}},methods:{emitEvent:function(){var t=this;this.$nextTick(function(){t.$emit("input",t.currentValue),t.$emit("on-change",t.currentValue)})},onComposition:function(t,e){"start"===e&&(this.onInput=!0),"end"===e&&(this.onInput=!1,this.emitEvent()),"input"===e&&(this.onInput||this.emitEvent())},clear:function(){this.currentValue="",this.emitEvent(),this.isFocus=!0,this.setFocus(),this.autoFixed&&!this.isFixed&&(this.isFixed=!0),this.$emit("on-clear")},cancel:function(){this.isCancel=!0,this.currentValue="",this.emitEvent(),this.isFixed=!1,this.$emit("on-cancel")},handleResultClick:function(t){this.$emit("result-click",t),this.$emit("on-result-click",t),this.isCancel=!0,this.isFixed=!1},touch:function(){this.isCancel=!1,this.autoFixed&&(this.isFixed=!0),this.$emit("on-touch")},setFocus:function(){this.$refs.input.focus()},setBlur:function(){this.$refs.input.blur()},onFocus:function(){this.isFocus=!0,this.$emit("on-focus"),this.touch()},onBlur:function(){this.isFocus=!1,this.$emit("on-blur")}},data:function(){return{onInput:!1,currentValue:"",isCancel:!0,isFocus:!1,isFixed:!1}},watch:{isFixed:function(t){!0===t&&(this.setFocus(),this.isFocus=!0,this.autoScrollToTop&&setTimeout(function(){window.scrollTo(0,0)},150))},value:function(t){this.currentValue=t}}}),vt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-search-box",class:{"vux-search-fixed":t.isFixed},style:{top:t.isFixed?t.top:"",position:t.fixPosition}},[i("div",{staticClass:"weui-search-bar",class:{"weui-search-bar_focusing":!t.isCancel||t.currentValue}},[t._t("left"),t._v(" "),i("form",{staticClass:"weui-search-bar__form",attrs:{action:"."},on:{submit:function(e){return e.preventDefault(),t.$emit("on-submit",t.value)}}},[i("label",{directives:[{name:"show",rawName:"v-show",value:!t.isFixed&&t.autoFixed,expression:"!isFixed && autoFixed"}],staticClass:"vux-search-mask",attrs:{for:"search_input_"+t.uuid},on:{click:t.touch}}),t._v(" "),i("div",{staticClass:"weui-search-bar__box"},[i("i",{staticClass:"weui-icon-search"}),t._v(" "),"checkbox"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-search-bar__input",attrs:{autocomplete:"off",id:"search_input_"+t.uuid,placeholder:t.placeholder,required:t.required,type:"checkbox"},domProps:{checked:Array.isArray(t.currentValue)?t._i(t.currentValue,null)>-1:t.currentValue},on:{focus:t.onFocus,blur:t.onBlur,compositionstart:function(e){return t.onComposition(e,"start")},compositionend:function(e){return t.onComposition(e,"end")},input:function(e){return t.onComposition(e,"input")},change:function(e){var i=t.currentValue,n=e.target,o=!!n.checked;if(Array.isArray(i)){var s=t._i(i,null);n.checked?s<0&&(t.currentValue=i.concat([null])):s>-1&&(t.currentValue=i.slice(0,s).concat(i.slice(s+1)))}else t.currentValue=o}}}):"radio"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-search-bar__input",attrs:{autocomplete:"off",id:"search_input_"+t.uuid,placeholder:t.placeholder,required:t.required,type:"radio"},domProps:{checked:t._q(t.currentValue,null)},on:{focus:t.onFocus,blur:t.onBlur,compositionstart:function(e){return t.onComposition(e,"start")},compositionend:function(e){return t.onComposition(e,"end")},input:function(e){return t.onComposition(e,"input")},change:function(e){t.currentValue=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-search-bar__input",attrs:{autocomplete:"off",id:"search_input_"+t.uuid,placeholder:t.placeholder,required:t.required,type:t.type},domProps:{value:t.currentValue},on:{focus:t.onFocus,blur:t.onBlur,compositionstart:function(e){return t.onComposition(e,"start")},compositionend:function(e){return t.onComposition(e,"end")},input:[function(e){e.target.composing||(t.currentValue=e.target.value)},function(e){return t.onComposition(e,"input")}]}}),t._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:t.currentValue,expression:"currentValue"}],staticClass:"weui-icon-clear",attrs:{href:"javascript:"},on:{click:t.clear}})]),t._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:!t.isFocus&&!t.value,expression:"!isFocus && !value"}],staticClass:"weui-search-bar__label",attrs:{for:"search_input_"+t.uuid}},[i("i",{staticClass:"weui-icon-search"}),t._v(" "),i("span",[t._v(t._s(t.placeholder||"搜索"))])])]),t._v(" "),i("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:"},on:{click:t.cancel}},[t._v(t._s(t.cancelText||"取消")+"\n    ")]),t._v(" "),t._t("right")],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFixed,expression:"isFixed"}],staticClass:"weui-cells vux-search_show"},[t._t("default"),t._v(" "),t._l(t.results,function(e){return i("div",{staticClass:"weui-cell weui-cell_access",on:{click:function(i){return t.handleResultClick(e)}}},[i("div",{staticClass:"weui-cell__bd weui-cell_primary"},[i("p",[t._v(t._s(e.title))])])])})],2)])},staticRenderFns:[]};var mt=i("VU/8")(ft,vt,!1,function(t){i("DzyS")},null,null).exports,gt=i("0FxO"),wt=(Boolean,Boolean,Boolean,String,String,Boolean,String,Object,Array,{name:"x-button",props:{type:{default:"default"},disabled:Boolean,mini:Boolean,plain:Boolean,text:String,actionType:String,showLoading:Boolean,link:[String,Object],gradients:{type:Array,validator:function(t){return 2===t.length}}},methods:{onClick:function(){!this.disabled&&Object(gt.a)(this.link,this.$router)}},computed:{noBorder:function(){return Array.isArray(this.gradients)},buttonStyle:function(){if(this.gradients)return{background:"linear-gradient(90deg, "+this.gradients[0]+", "+this.gradients[1]+")",color:"#FFFFFF"}},classes:function(){return[{"weui-btn_disabled":!this.plain&&this.disabled,"weui-btn_plain-disabled":this.plain&&this.disabled,"weui-btn_mini":this.mini,"vux-x-button-no-border":this.noBorder},this.plain?"":"weui-btn_"+this.type,this.plain?"weui-btn_plain-"+this.type:"",this.showLoading?"weui-btn_loading":""]}}}),xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"weui-btn",class:t.classes,style:t.buttonStyle,attrs:{disabled:t.disabled,type:t.actionType},on:{click:t.onClick}},[t.showLoading?i("i",{staticClass:"weui-loading"}):t._e(),t._v(" "),t._t("default",function(){return[t._v(t._s(t.text))]})],2)},staticRenderFns:[]};var yt=i("VU/8")(wt,xt,!1,function(t){i("pnmM")},null,null).exports,_t=i("afSG"),bt=i.n(_t),St={components:{Search:mt,XButton:yt},data:function(){return{flag:!1,searchValue:"",dataList:[]}},mounted:function(){this.$store.commit("changeHeaderBack",!0),console.log("setUp-======================="),console.log(r.getList),this.getTabel()},beforeDestroy:function(){this.$store.commit("changeHeaderBack",!1)},methods:{getResult:function(t){console.log(t),this.searchValue=t,this.getTabel(t)},onFocus:function(){this.searchValue="",this.getTabel()},onCancel:function(){this.searchValue="",this.getTabel()},getTabel:function(t){var e=this;return _()(g.a.mark(function i(){var n,o;return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=e,o={},window.nativejs.getUserInfo()||"",(t=e.searchValue)&&(o={name:t,filter:""}),J().then(function(t){s.a.get(r.getList,{params:o}).then(function(i){if(console.log("请求"),i&&i.data){var o=i.data.result;for(var s in o){o[s].progress=0,o[s].showProgress=!1;var a=tt()(t,{id:o[s].id});if(a){if(a.version!=o[s].version){var r=e.$store.state.updatedApps;r.push(a),e.$store.commit("changeShowDot",r),o[s].nversion=o[s].version,o[s].version=a.version}o[s].path=a.path,o[s].installed=a.installed,o[s].fileType=a.fileType}}n.dataList=it()(o)}else console.log("111"),window.navigator.dialogsPlus.showNotice("服务器访问异常,请检查网络")}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)});case 5:case"end":return i.stop()}},i,e)}))()},get:function(){console.log(v()(window.localStorage.getItem("msgs")))},clear:function(){window.localStorage.removeItem("msgs")},unzip:function(t,e){var i=e.key;return new h.a(function(n,o){var s=cordova.file.externalRootDirectory+W+"/"+i;window.zip.unzip(t,s,function(t){0==t?(console.log("解压完成"),n(s)):-1==t&&console.log("解压失败")},function(t){var i=Math.round(t.loaded/t.total*100);e.progress=parseInt(i/2+50)})})},writeFile:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"version.txt";return new h.a(function(n,o){t.getFile(i,{create:!0,exclusive:!1},function(t){t.createWriter(function(t){t.onwriteend=function(){console.log("Successful file write..."),n("success")},t.onerror=function(t){console.log("Failed file write: "+t.toString()),o(t)},e||(e=new Blob(["some file data"],{type:"text/plain"})),t.write(e)})},function(t){o(t)})})},install:function(t){var e=this;t.showProgress=!0;var i=new FileTransfer,n=0;i.onprogress=function(e){e.lengthComputable&&(n=e.loaded/e.total,t.progress=parseInt(n/2*100))};var o=cordova.file.externalRootDirectory+W+"/"+t.key+t.version+".zip";i.download(t.url,o,function(i){n>=1&&i.file(function(i){e.unzip(o,t).then(function(i){t.showProgress=!1,window.resolveLocalFileSystemURL(i,function(n){n.getFile("workordermz.apk",{create:!1},function(s){console.log("apk路径："+s.nativeURL),console.log("================");var a=it()(t),r=new Blob([v()(rt()(a,{path:i,installed:!0,fileType:"apk"}))],{type:"text/plain"});e.writeFile(n,r,"version.txt").then(function(n){e.$set(tt()(e.dataList,{id:t.id}),"installed",!0),e.$set(tt()(e.dataList,{id:t.id}),"path",i),e.$set(tt()(e.dataList,{id:t.id}),"fileType","apk"),window.client.subscribe(pt()({},t.key,{qos:2}),function(e){e||console.log("订阅"+t.key+"成功")}),window.resolveLocalFileSystemURL(o,function(t){t.remove(function(){cordova.plugins.fileOpener2.open(s.nativeURL,"application/vnd.android.package-archive")},function(t){console.error(t)},function(){console.log("file not exist")})})})},function(s){console.log("apk错误："+v()(s));var a=it()(t),r=new Blob([v()(rt()(a,{path:i,installed:!0}))],{type:"text/plain"});e.writeFile(n,r,"version.txt").then(function(n){e.$set(tt()(e.dataList,{id:t.id}),"installed",!0),e.$set(tt()(e.dataList,{id:t.id}),"path",i),(new FileTransfer).download(t.logo,cordova.file.externalRootDirectory+W+"/"+t.key+"/"+t.picname,function(e){t.localLogo=e.toURL()}),window.client.subscribe(pt()({},t.key,{qos:2}),function(e){e||console.log("订阅"+t.key+"成功")}),window.resolveLocalFileSystemURL(o,function(t){t.remove(function(){window.navigator.dialogsPlus.showNotice("安装成功")},function(t){console.error(t)},function(){console.log("file not exist")})})})})})})})},function(i){window.navigator.dialogsPlus.showNotice("下载失败！"),e.$set(tt()(e.dataList,{id:t.id}),"installed",!1),e.$set(tt()(e.dataList,{id:t.id}),"progress",0),e.$set(tt()(e.dataList,{id:t.id}),"showProgress",!1),window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory+W+"/"+t.key,function(t){t.remove(function(){},function(t){console.error(t)},function(){console.log("file not exist")})})})},update:function(t){var e=this;return _()(g.a.mark(function i(){var n;return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=e.$store.state.updatedApps,bt()(n,{id:t.id}),e.$store.commit("changeShowDot",n),s()({url:r.getDetail,method:"post",data:{id:t.id}}).then(function(i){if(i&&i.data){rt()(t,i.data);var n=e;t.showProgress=!0;var o=new FileTransfer,s=0;o.onprogress=function(e){e.lengthComputable&&(s=e.loaded/e.total,t.progress=parseInt(s/2*100))};var a=cordova.file.externalRootDirectory+W+"/"+t.key+t.version+".zip";o.download(t.url,a,function(i){s>=1&&(t.showProgress=!1,i.file(function(i){n.unzip(a,t).then(function(i){t.showProgress=!1,window.resolveLocalFileSystemURL(i,function(e){e.getFile("workordermz.apk",{create:!1},function(i){console.log("apk路径："+i.nativeURL),console.log("================"),n.$set(tt()(n.dataList,{id:t.id}),"version",t.nversion),t.version=t.nversion;var o=new Blob([v()(t)],{type:"text/plain"});n.writeFile(e,o,"version.txt").then(function(t){window.resolveLocalFileSystemURL(a,function(t){t.remove(function(){cordova.plugins.fileOpener2.open(i.nativeURL,"application/vnd.android.package-archive")},function(t){console.error(t)},function(){console.log("file not exist")})})})},function(i){console.log("apk错误："+v()(i)),n.$set(tt()(n.dataList,{id:t.id}),"version",t.nversion),t.version=t.nversion;var o=new Blob([v()(t)],{type:"text/plain"});n.writeFile(e,o,"version.txt").then(function(t){window.resolveLocalFileSystemURL(a,function(t){t.remove(function(){},function(t){console.error(t)},function(){console.log("file not exist")})})})})});var o=n.$store.state.updatedApps;bt()(o,{id:t.id}),e.$store.commit("changeShowDot",o)})}))},function(e){window.navigator.dialogsPlus.showNotice("下载失败！"),n.$set(tt()(n.dataList,{id:t.id}),"installed",!1),n.$set(tt()(n.dataList,{id:t.id}),"progress",0),n.$set(tt()(n.dataList,{id:t.id}),"showProgress",!1),window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory+W+"/"+t.key,function(t){t.remove(function(){},function(t){console.error(t)},function(){console.log("file not exist")})})})}});case 4:case"end":return i.stop()}},i,e)}))()},unInstall:function(t){var e=this;console.log(t.path),window.resolveLocalFileSystemURL(t.path,function(i){i.removeRecursively(function(){if("apk"==t.fileType&&window.nativejs.cleanWorkOrder(),window.client&&window.client.unsubscribe(t.key,function(t){}),window.localStorage.getItem("msgs")){var i=JSON.parse(window.localStorage.getItem("msgs"));i[t.key]&&(delete i[t.key],window.localStorage.setItem("msgs",v()(i)))}e.$set(tt()(e.dataList,{id:t.id}),"installed",!1),e.$set(tt()(e.dataList,{id:t.id}),"path",void 0),e.$set(tt()(e.dataList,{id:t.id}),"fileType",void 0)},function(t){console.error(v()(t))},function(){console.log("file not exist")})})},open:function(t){var e=this;"apk"==t.fileType?(window.nativejs.openWorkOrder(cordova.file.externalRootDirectory),setInterval(function(){window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory,function(t){var i=JSON.parse(window.nativejs.getDeviceInfo()),n=new Blob([i.lng+","+i.lat],{type:"text/plain"});e.writeFile(t,n,"gps.txt")})},1e4)):this.$router.push({path:"/apps_frame",query:{url:encodeURIComponent(t.path+"/index.html"),name:t.name}})}},watch:{dataList:{handler:function(t){window.localStorage.setItem("list",v()(t))},deep:!0}}},kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"appBox"},[i("div",{staticStyle:{height:"46px"}},[i("search",{ref:"search",attrs:{top:"46px"},on:{"on-change":t.getResult,"on-focus":t.onFocus,"on-cancel":t.onCancel},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),t._v(" "),t._l(t.dataList,function(e,n){return i("div",{key:e.id,staticClass:"content"},[i("div",{staticClass:"contentLeft"},[i("img",{attrs:{src:e.logo,alt:""}}),t._v(" "),i("div",{staticStyle:{height:"70px",display:"flex","justify-content":"space-around","flex-direction":"column"}},[i("p",[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v("版本"+t._s(e.version))])])]),t._v(" "),i("div",{staticClass:"contentRight"},[e.installed?i("span",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[e.showProgress?i("span",[t._v(t._s(e.progress)+"%")]):t._e(),t._v(" "),e.showProgress?i("x-progress",{staticStyle:{"margin-bottom":"5px",width:"60px",height:"30px"},attrs:{percent:e.progress,"show-cancel":!1}}):i("span",[e.nversion&&e.version!=e.nversion?i("badge",{staticStyle:{position:"absolute",top:"0px",right:"0px"}}):t._e(),t._v(" "),i("span",{staticStyle:{display:"flex","flex-direction":"column"}},[e.nversion&&e.version!=e.nversion?i("x-button",{attrs:{type:"primary",plain:"",mini:""},nativeOn:{click:function(i){return t.update(e)}}},[t._v("升级")]):i("x-button",{staticStyle:{background:"#c2ebdd"},attrs:{type:"primary",mini:"",plain:""},nativeOn:{click:function(i){return t.open(e)}}},[t._v("打开")]),t._v(" "),i("x-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"warn",mini:"",plain:""},nativeOn:{click:function(i){return t.unInstall(e)}}},[t._v("卸载")])],1)],1)],1):i("span",[e.showProgress?i("span",[t._v(t._s(e.progress)+"%")]):t._e(),t._v(" "),e.showProgress?i("x-progress",{staticStyle:{"margin-bottom":"5px",width:"60px",height:"30px"},attrs:{percent:e.progress,"show-cancel":!1}}):i("x-button",{attrs:{type:"primary",plain:"",mini:""},nativeOn:{click:function(i){return t.install(e)}}},[t._v("安装")])],1)])])})],2)},staticRenderFns:[]};var Ct=i("VU/8")(St,kt,!1,function(t){i("FXTS")},"data-v-f2fa9a8a",null).exports,$t=(Number,String,String,String,String,String,{name:"flexbox",props:{gutter:{type:Number,default:8},orient:{type:String,default:"horizontal"},justify:String,align:String,wrap:String,direction:String},computed:{styles:function(){var t={"justify-content":this.justify,"-webkit-justify-content":this.justify,"align-items":this.align,"-webkit-align-items":this.align,"flex-wrap":this.wrap,"-webkit-flex-wrap":this.wrap,"flex-direction":this.direction,"-webkit-flex-direction":this.direction};return t}}}),Ot={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-flexbox",class:{"vux-flex-col":"vertical"===this.orient,"vux-flex-row":"horizontal"===this.orient},style:this.styles},[this._t("default")],2)},staticRenderFns:[]};var Bt=i("VU/8")($t,Ot,!1,function(t){i("suwa")},null,null).exports,Ft=(Number,String,Number,String,["-moz-box-","-webkit-box-",""]),Lt={name:"flexbox-item",props:{span:[Number,String],order:[Number,String]},beforeMount:function(){this.bodyWidth=document.documentElement.offsetWidth},methods:{buildWidth:function(t){return"number"==typeof t?t<1?t:t/12:"string"==typeof t?t.replace("px","")/this.bodyWidth:void 0}},computed:{style:function(){var t={},e="horizontal"===this.$parent.orient?"marginLeft":"marginTop";if(1*this.$parent.gutter!=0&&(t[e]=this.$parent.gutter+"px"),this.span)for(var i=0;i<Ft.length;i++)t[Ft[i]+"flex"]="0 0 "+100*this.buildWidth(this.span)+"%";return void 0!==this.order&&(t.order=this.order),t}},data:function(){return{bodyWidth:0}}},Tt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-flexbox-item",style:this.style},[this._t("default")],2)},staticRenderFns:[]},Rt=i("VU/8")(Lt,Tt,!1,null,null,null).exports,Nt={name:"index",components:{Flexbox:Bt,FlexboxItem:Rt},data:function(){return{companyS:[{content:"公司在省政府新闻发布会上发布优化环境建设。促进发展",times:"2019 03 25"},{content:"《中国电力报》头版头条：国网辽宁电力积极融入",times:"2019 03 26"}],companySe:[{content:"公司党组传达学习习近平总书记全面两会重要讲话精神表达",times:"2019 03 25"},{content:"推动融合发展，加快“三型两网、世界一流的建设",times:"2019 03 26"}],topList:[{top:1,imgUrl:i("Didw"),title:"用户档案查询",score:"23"},{top:2,imgUrl:i("Didw"),title:"现场导航",score:"21"},{top:3,imgUrl:i("Didw"),title:"现场抄表",score:"21"}]}}},It={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{background:"#fff"}},[n("div",{staticStyle:{"text-align":"left",margin:"0 10px",padding:"10px 0","font-size":"14px",color:"#444"}},[n("flexbox",{attrs:{orient:"vertical"}},[n("flexbox-item",[n("div",{staticClass:"flex-demo",staticStyle:{height:"200px","border-radius":"10px"}},[n("img",{staticStyle:{width:"100%",height:"100%","border-radius":"10px"},attrs:{src:i("Didw"),alt:""}})])]),t._v(" "),n("flexbox-item",[n("div",{staticClass:"flex-demo"},[n("p",{staticStyle:{"font-size":"16px","font-weight":"bold","line-height":"16px",padding:"10px"}},[t._v("\n\t\t\t\t\t\t\t公司召开2019年电网发展于建设工作会议")]),t._v(" "),n("p",{staticStyle:{"font-size":"14px",color:"#444",padding:"10px"}},[n("span",[t._v("发布时间：")]),n("span",[t._v("2019 03 25")])]),t._v(" "),n("div",{staticStyle:{background:"rgb(249,249,249)",padding:"10px","text-indent":"1.5em"}},[n("p",[t._v("深入学习贯彻习近平新时代中国特色社会主义思想和党的十九大精神，坚持党的领导、加强党的建设，\n\t\t\t\t\t\t\t\t组织动员各级党组织和全体党员干部勇于担当作为，站在新起点，改革再出发，开创公司高质量发展新局面，提出如下意见。")])])])]),t._v(" "),n("flexbox-item",[n("div",{staticClass:"flex-demo"},[n("div",{staticClass:"useAble"},[n("span",{staticStyle:{"border-bottom":"1px solid rgb(51,204,153)"}},[t._v("\n                应用排行\n              ")])]),t._v(" "),n("div",{staticStyle:{padding:"10px 0",display:"flex","flex-wrap":"wrap",width:"90vw",margin:"autos"}},t._l(t.topList,function(e){return n("div",{staticClass:"mainDiv",staticStyle:{background:"rgb(251,251,251)","border-radius":"5px",border:"1px solid rgb(233,233,233)",width:"40vw",margin:"5px 8px"}},[n("div",{staticClass:"beforeDiv"},[t._v(t._s(e.top))]),t._v(" "),n("div",{staticStyle:{display:"flex"}},[n("div",{staticClass:"userimg",staticStyle:{width:"80px"}},[n("img",{staticStyle:{"border-radius":"10px",margin:"5px 15px",width:"50px",height:"50px"},attrs:{src:e.imgUrl,alt:""}})]),t._v(" "),n("div",{staticClass:"userDiv",staticStyle:{margin:"auto"}},[n("p",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticStyle:{"font-size":"12px"}},[n("span",[t._v("得分：")]),t._v(" "),n("span",[t._v(t._s(e.score))])])])])])}),0)])]),t._v(" "),n("flexbox-item",[n("div",{staticClass:"flex-demo"},[n("div",{staticClass:"useAble"},[n("span",{staticStyle:{"border-bottom":"1px solid rgb(51,204,153)"}},[t._v("\n                省公司咨询\n              ")])]),t._v(" "),n("div",{staticStyle:{padding:"10px 0"}},[n("div",{staticStyle:{background:"rgb(251,251,251)","border-radius":"5px",border:"1px solid rgb(233,233,233)"}},t._l(t.companySe,function(e){return n("div",{staticStyle:{display:"flex","font-size":"14px"}},[n("div",{staticStyle:{width:"70%",padding:"10px 0"}},[n("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","line-height":"14px","font-size":"16px","text-indent":"5px",padding:"5px 0"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.content))])]),t._v(" "),n("div",{staticStyle:{"text-align":"center","line-height":"30px",padding:"10px 0","margin-left":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.times)+"\n\t\t\t\t\t\t\t\t\t")])])}),0)])])]),t._v(" "),n("flexbox-item",[n("div",{staticClass:"flex-demo"},[n("div",{staticClass:"useAble"},[n("span",{staticStyle:{"border-bottom":"1px solid rgb(51,204,153)"}},[t._v("\n                市公司咨询\n              ")])]),t._v(" "),n("div",{staticStyle:{padding:"10px 0"}},[n("div",{staticStyle:{background:"rgb(251,251,251)","border-radius":"5px",border:"1px solid rgb(233,233,233)"}},t._l(t.companyS,function(e){return n("div",{staticStyle:{display:"flex","font-size":"14px"}},[n("div",{staticStyle:{width:"70%",padding:"10px 0"}},[n("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","line-height":"16px","font-size":"14px","text-indent":"5px",padding:"5px 0"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.content)+"\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),n("div",{staticStyle:{"text-align":"center","line-height":"30px",padding:"10px 0","margin-left":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.times)+"\n\t\t\t\t\t\t\t\t\t")])])}),0)])])])],1)],1)])},staticRenderFns:[]};var Vt=i("VU/8")(Nt,It,!1,function(t){i("Kb46")},"data-v-6e2d1d06",null).exports,Ut={name:"message",data:function(){return{dataList:[]}},mounted:function(){var t=this;return _()(g.a.mark(function e(){var i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,e.next=3,t.getList();case 3:return e.next=5,t.getList2();case 5:window.onAppMessage=function(t,e){i.getList()};case 6:case"end":return e.stop()}},e,t)}))()},methods:{getList:function(){var t=this;return _()(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J().then(function(e){var i=JSON.parse(window.localStorage.getItem("msgs")),n=t.$store.state.messageNum;for(var o in e)e[o].msg=i[e[o].key][0].msg,e[o].title=i[e[o].key][0].title,e[o].ctime=i[e[o].key][0].ctime,e[o].count=n[e[o].key];t.dataList=e});case 1:case"end":return e.stop()}},e,t)}))()},getList2:function(){var t=this;return _()(g.a.mark(function e(){var i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i={},window.localStorage.getItem("msgs")&&(i=JSON.parse(window.localStorage.getItem("msgs"))),t.dataList=i[t.$route.query.key],s()({url:r.msgList,method:"get"}).then(function(e){e&&e.data.result&&(t.dataList=e.data.result)});case 4:case"end":return e.stop()}},e,t)}))()},enter:function(t){this.$store.commit("changeMessageNum",{topic:t.key,num:0});var e=JSON.parse(window.localStorage.getItem("msgs")||"{}");for(var i in e[t.key])e[t.key][i].hasRead=!0;window.localStorage.setItem("msgs",v()(e)),this.$router.push({path:"/messageDetail",query:{id:t.id,key:t.key}})}}},jt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"appBox"},t._l(t.dataList,function(e,n){return i("div",{key:e.id,staticClass:"content",staticStyle:{position:"relative"},on:{click:function(i){return t.enter(e)}}},[i("div",{staticClass:"contentLeft"},[i("img",{attrs:{src:e.logo,alt:""}}),t._v(" "),e.count?i("badge",{staticStyle:{position:"absolute",top:"0",left:"46px"},attrs:{text:e.count.toString()}}):t._e()],1),t._v(" "),i("div",{staticClass:"contentRight"},[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("p",[t._v(t._s(e.name))]),t._v(" "),i("p",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.ctime))])]),t._v(" "),i("div",[i("p",{staticStyle:{"font-size":"13px",color:"red",width:"calc(100vw - 110px)",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v("\n          "+t._s(e.title)+"\n        ")])])])])}),0)},staticRenderFns:[]};var Dt=i("VU/8")(Ut,jt,!1,function(t){i("+4Vw"),i("veAJ")},"data-v-6129522b",null).exports,At={name:"messageDetail",data:function(){return{dataList:[],appDetail:{}}},mounted:function(){var t=this;return _()(g.a.mark(function e(){var i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getOnlineText();case 2:t.$store.commit("changeHeaderBack",!0),(i=t).getList(),window.onAppMessage=function(t,e){i.getList()};case 6:case"end":return e.stop()}},e,t)}))()},beforeDestroy:function(){this.$store.commit("changeHeaderBack",!1),this.$store.commit("changeHeaderName","")},methods:{getOnlineText:function(){var t=this;return _()(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s()({url:r.msgDetail,method:"post",data:{key:t.$route.query.key}}).then(function(e){var i=[],n=!0,o=!1,s=void 0;try{for(var a,r=x()(e.data.result);!(n=(a=r.next()).done);n=!0){var l=a.value,c=JSON.parse(l.payload);c.hasRead=!0,i.unshift(c)}}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}t.dataList=i,t.$refs.my_scroller.finishPullToRefresh();var u={};window.localStorage.getItem("msgs")&&(u=JSON.parse(window.localStorage.getItem("msgs"))),u[t.$route.query.key]=i,window.localStorage.setItem("msgs",v()(u))});case 1:case"end":return e.stop()}},e,t)}))()},getList:function(){var t=this;return _()(g.a.mark(function e(){var i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i={},window.localStorage.getItem("msgs")&&(i=JSON.parse(window.localStorage.getItem("msgs"))),t.dataList=i[t.$route.query.key],s()({url:r.getDetail,method:"post",data:{id:t.$route.query.id}}).then(function(e){e&&e.data.result&&(t.$store.commit("changeHeaderName",e.data.result.name),t.$store.commit("changeHeaderBack",!0),t.appDetail=e.data.result)});case 4:case"end":return e.stop()}},e,t)}))()}}},Mt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{background:"#efefef",height:"calc(100vh - 110px)"}},[i("scroller",{ref:"my_scroller",staticStyle:{"margin-top":"46px"},attrs:{"on-refresh":t.getOnlineText}},[i("div",{staticStyle:{"text-align":"left",padding:"10px 0","font-size":"14px",color:"#444"}},t._l(t.dataList,function(e,n){return i("div",{key:e.id},[i("div",{staticStyle:{margin:"0 auto",width:"200px","text-align":"center",color:"#aaa","font-size":"13px"}},[t._v(t._s(e.ctime))]),t._v(" "),i("div",{staticStyle:{margin:"5px 10px 20px 10px",background:"#fff","border-radius":"10px","min-height":"100px",padding:"10px"}},[i("p",{staticStyle:{"font-size":"16px",color:"#000","font-weight":"bold","line-height":"30px"}},[t._v(t._s(e.title))]),t._v(" "),i("p",{staticStyle:{"font-size":"14px",color:"#444","word-wrap":"break-word"}},[t._v(t._s(e.msg))])])])}),0)])],1)},staticRenderFns:[]};var Et=i("VU/8")(At,Mt,!1,function(t){i("ugJX")},"data-v-190f0fb6",null).exports,Pt={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"vux-label-desc"},[this._t("default")],2)},staticRenderFns:[]};var qt=i("VU/8")({name:"inline-desc"},Pt,!1,function(t){i("uyKd")},null,null).exports,zt=i("2IIR"),Ht=i("wmxo"),Wt=i("vLYD"),Jt=(Object(zt.a)(),{name:"cell",components:{InlineDesc:qt},props:Object(zt.a)(),created:function(){0},beforeMount:function(){this.hasTitleSlot=!!this.$slots.title,this.$slots.value},computed:{labelStyles:function(){return Object(Ht.a)({width:Object(Wt.a)(this,"labelWidth"),textAlign:Object(Wt.a)(this,"labelAlign"),marginRight:Object(Wt.a)(this,"labelMarginRight")})},valueClass:function(){return{"vux-cell-primary":"content"===this.primary||"left"===this.valueAlign,"vux-cell-align-left":"left"===this.valueAlign,"vux-cell-arrow-transition":!!this.arrowDirection,"vux-cell-arrow-up":"up"===this.arrowDirection,"vux-cell-arrow-down":"down"===this.arrowDirection}},labelClass:function(){return{"vux-cell-justify":this.$parent&&("justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign)}},style:function(){if(this.alignItems)return{alignItems:this.alignItems}}},methods:{onClick:function(){!this.disabled&&Object(gt.a)(this.link,this.$router)}},data:function(){return{hasTitleSlot:!0,hasMounted:!1}}}),Xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell",class:{"vux-tap-active":t.isLink||!!t.link,"weui-cell_access":t.isLink||!!t.link,"vux-cell-no-border-intent":!t.borderIntent,"vux-cell-disabled":t.disabled},style:t.style,on:{click:t.onClick}},[i("div",{staticClass:"weui-cell__hd"},[t._t("icon")],2),t._v(" "),i("div",{staticClass:"vux-cell-bd",class:{"vux-cell-primary":"title"===t.primary&&"left"!==t.valueAlign}},[i("p",[t.title||t.hasTitleSlot?i("label",{staticClass:"vux-label",class:t.labelClass,style:t.labelStyles},[t._t("title",function(){return[t._v(t._s(t.title))]})],2):t._e(),t._v(" "),t._t("after-title")],2),t._v(" "),i("inline-desc",[t._t("inline-desc",function(){return[t._v(t._s(t.inlineDesc))]})],2)],1),t._v(" "),i("div",{staticClass:"weui-cell__ft",class:t.valueClass},[t._t("value"),t._v(" "),t._t("default",function(){return[t._v(t._s(t.value))]}),t._v(" "),t.isLoading?i("i",{staticClass:"weui-loading"}):t._e()],2),t._v(" "),t._t("child")],2)},staticRenderFns:[]};var Gt=i("VU/8")(Jt,Xt,!1,function(t){i("g8X3")},null,null).exports,Zt=(Ht.a,String,String,String,String,String,String,Number,String,String,{name:"group",methods:{cleanStyle:Ht.a},props:{title:String,titleColor:String,labelWidth:String,labelAlign:String,labelMarginRight:String,gutter:[String,Number],footerTitle:String,footerTitleColor:String}}),Kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.title?i("div",{staticClass:"weui-cells__title",style:t.cleanStyle({color:t.titleColor}),domProps:{innerHTML:t._s(t.title)}}):t._e(),t._v(" "),t._t("title"),t._v(" "),i("div",{staticClass:"weui-cells",class:{"vux-no-group-title":!t.title},style:t.cleanStyle({marginTop:"number"==typeof t.gutter?t.gutter+"px":t.gutter})},[t._t("after-title"),t._v(" "),t._t("default")],2),t._v(" "),t.footerTitle?i("div",{staticClass:"weui-cells__title vux-group-footer-title",style:t.cleanStyle({color:t.footerTitleColor}),domProps:{innerHTML:t._s(t.footerTitle)}}):t._e()],2)},staticRenderFns:[]};var Qt=i("VU/8")(Zt,Kt,!1,function(t){i("TdSv")},null,null).exports,Yt={name:"my",components:{Cell:Gt,Group:Qt,XButton:yt},mounted:function(){this.userObj=this.$store.state.userObj.data,console.log(v()(this.$store.state.userObj))},data:function(){return{userObj:{}}},methods:{cleanCache:function(){console.log("aaa"),console.log(cordova.file.externalRootDirectory+W),window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory+W,function(t){console.log(v()(t)),t.removeRecursively(function(){window.resolveLocalFileSystemURI(cordova.file.externalRootDirectory,function(t){t.getDirectory(W,{create:!0},function(t){},errorCallback)}),this.$store.commit("changeShowDot",[]),window.navigator.dialogsPlus.showNotice("缓存清除成功")},function(t){console.error(v()(t))},function(){console.log("file not exist")})})}}},te={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("group",[i("cell",{attrs:{title:"姓名",value:t.userObj.name}}),t._v(" "),i("cell",{attrs:{title:"公司",value:t.userObj.com}}),t._v(" "),i("cell",{attrs:{title:"电话",value:t.userObj.tel}})],1),t._v(" "),i("XButton",{staticStyle:{"margin-top":"50px"},nativeOn:{click:function(e){return t.cleanCache.apply(null,arguments)}}},[t._v("清除缓存")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("img",{staticStyle:{"border-radius":"50%",width:"20vw",height:"20vw","margin-top":"3vh"},attrs:{src:i("cQq1"),alt:""}})])}]};var ee=i("VU/8")(Yt,te,!1,function(t){i("ulaO")},"data-v-c40f7a88",null).exports;n.a.use(d.a);var ie=new d.a({routes:[{path:"/",name:"HelloWorld",component:Q,redirect:"app",children:[{path:"index",name:"首页",component:Vt},{path:"app",name:"应用",component:st},{path:"setUp",name:"管理应用",component:Ct},{path:"message",name:"消息",component:Dt},{path:"my",name:"我的",component:ee},{path:"messageDetail",name:"消息详情",component:Et},{path:"/apps_frame",name:"应用窗口",component:ut}]}]}),ne=i("NYxO");n.a.use(ne.a);var oe=new ne.a.Store({state:{updatedApps:[],messageNum:{},headerBack:!1,headerName:"",messageTotal:0,userObj:{}},mutations:{changeUserObj:function(t,e){t.userObj=e},changeHeaderBack:function(t,e){t.headerBack=e},changeHeaderName:function(t,e){t.headerName=e},changeShowDot:function(t,e){t.updatedApps=e},changeMessageNum:function(t,e){t.messageNum[e.topic]=e.num;var i=0;for(var n in t.messageNum)i+=1*t.messageNum[n];t.messageTotal=i}},actions:{}}),se=i("JkZY"),ae=(se.a,Boolean,String,String,Number,String,String,Boolean,Object,Boolean,{mixins:[se.a],name:"x-dialog",model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},maskZIndex:[String,Number],dialogTransition:{type:String,default:"vux-dialog"},dialogClass:{type:String,default:"weui-dialog"},hideOnBlur:Boolean,dialogStyle:Object,scroll:{type:Boolean,default:!0,validator:function(t){return!0}}},computed:{maskStyle:function(){if(void 0!==this.maskZIndex)return{zIndex:this.maskZIndex}}},mounted:function(){"undefined"!=typeof window&&window.VUX_CONFIG&&"VIEW_BOX"===window.VUX_CONFIG.$layout&&(this.layout="VIEW_BOX")},watch:{show:function(t){this.$emit("update:show",t),this.$emit(t?"on-show":"on-hide"),t?this.addModalClassName():this.removeModalClassName()}},methods:{shouldPreventScroll:function(){var t=/iPad|iPhone|iPod/i.test(window.navigator.userAgent),e=this.$el.querySelector("input")||this.$el.querySelector("textarea");if(t&&e)return!0},hide:function(){this.hideOnBlur&&(this.$emit("update:show",!1),this.$emit("change",!1),this.$emit("on-click-mask"))}},data:function(){return{layout:""}}}),re={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-x-dialog",class:{"vux-x-dialog-absolute":"VIEW_BOX"===t.layout}},[i("transition",{attrs:{name:t.maskTransition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-mask",style:t.maskStyle,on:{click:function(e){return e.target!==e.currentTarget?null:t.hide.apply(null,arguments)}}},[i("transition",{attrs:{name:t.dialogTransition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.dialogClass,style:t.dialogStyle},[t._t("default")],2)])],1)])],1)},staticRenderFns:[]};var le=i("VU/8")(ae,re,!1,function(t){i("/VG+")},null,null).exports,ce=i("f6Hi"),ue=(ce.a,Number,Boolean,{name:"x-progress",mixins:[ce.a],props:{percent:{type:Number,default:0},showCancel:{type:Boolean,default:!0}},methods:{cancel:function(){this.$emit("on-cancel")}}}),de={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-progress"},[e("div",{staticClass:"weui-progress__bar"},[e("div",{staticClass:"weui-progress__inner-bar",style:{width:this.percent+"%"}})]),this._v(" "),e("a",{directives:[{name:"show",rawName:"v-show",value:this.showCancel,expression:"showCancel"}],staticClass:"weui-progress_opr",attrs:{href:"javascript:;"}},[e("i",{staticClass:"weui-icon-cancel",on:{click:this.cancel}})])])},staticRenderFns:[]};var pe=i("VU/8")(ue,de,!1,function(t){i("VIAR")},null,null).exports,he=i("xNvf"),fe=(he.a,Boolean,Number,String,String,String,Boolean,String,String,{name:"toast",mixins:[he.a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(t){this.show=t}}}),ve={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-toast"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMask&&t.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),t._v(" "),i("transition",{attrs:{name:t.currentTransition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-toast",class:t.toastClass,style:{width:t.width}},[i("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t._v(" "),t.text?i("p",{staticClass:"weui-toast__content",style:t.style,domProps:{innerHTML:t._s(t.text)}}):i("p",{staticClass:"weui-toast__content",style:t.style},[t._t("default")],2)])])],1)},staticRenderFns:[]};var me=i("VU/8")(fe,ve,!1,function(t){i("Zasf")},null,null).exports,ge=i("Cg+j"),we=i.n(ge),xe=i("POcy"),ye=i.n(xe),_e=i("Lw6n");new(i.n(_e).a),n.a.use(s.a),n.a.use(ye.a),n.a.use(ne.a),window.mqtt=we.a,n.a.config.productionTip=!1,n.a.component("x-dialog",le),n.a.component("x-progress",pe),n.a.component("toast",me),n.a.component("badge",V),n.a.component("x-button",yt),ie.beforeResolve(function(t,e,i){console.log(e);var n=0;n="/app"===e.path?0:1,window.sessionStorage.setItem("showBack",n),i()});new n.a({store:oe,router:ie});new n.a({el:"#app",router:ie,store:oe,components:{App:u},template:"<App/>"})},NqEG:function(t,e){},OZb3:function(t,e){},TdSv:function(t,e){},VIAR:function(t,e){},X3Nh:function(t,e){},XmeG:function(t,e,i){t.exports=i.p+"static/media/5358.f4730e4.wav"},Zasf:function(t,e){},cQq1:function(t,e,i){t.exports=i.p+"static/img/cat.f9c1c97.jpg"},g8X3:function(t,e){},pnmM:function(t,e){},suwa:function(t,e){},ugJX:function(t,e){},ulaO:function(t,e){},uyKd:function(t,e){},veAJ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bcff393069e034959603.js.map