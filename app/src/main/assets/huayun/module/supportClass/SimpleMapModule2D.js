//>>built
define("com/huayun/module/supportClass/SimpleMapModule2D",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/topic","./BaseMapModule","com/huayun/webgis/Map","../../webgis/facade/MapConfigFacade","../../webgis/geometry/Extent","../../webgis/layers/2d/TileLayer","../../webgis/layers/2d/VectorTileLayer"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1("com.huayun.module.supportClass.SimpleMapModule2D",[_5],{_mapConfigFacade:"",constructor:function(){_4.subscribe("mapLoadComplete",function(){this._mapLoadCompleteHandler();}.bind(this));},postCreate:function(){this.inherited(arguments);_3.set(this.domNode,"position","absolute");},startup:function(){this.inherited(arguments);this.map=new _6({id:"map",is3D:false,width:this.domNode.clientWidth,height:this.domNode.clientHeight,maxLevel:15});this.map.placeAt(this.domNode);},doInit:function(){var _b=this.get("configUrl");this._mapConfigFacade=new _7({url:_b});this._mapConfigFacade.getMapConfigData(function(_c){this.configData=_c;var _d=this._getInitialExtent(_c.map);this.map.setExtent(_d);this._createLayer(_c.map);}.bind(this),function(_e){});},_getInitialExtent:function(_f){var _10=_f.properties.initialExtent;return new _8(_10.minX,_10.minY,_10.maxX,_10.maxY);},_createLayer:function(map){for(var i=0;i<map.layers.length;i++){var _11=map.layers[i];if(_11.dimensions==="2D"){if(_11.type==="VectorTileLayer"){var _12=new _a({width:this.width,height:this.height,id:"tileLayer"+_11.name,visible:_11.visible,map:this.map,tileUrl:_11.dataSource.serviceURL});this.map.addLayer(_12);}else{var _13=new _9({width:this.width,height:this.height,id:"tileLayer"+_11.name,visible:_11.visible,map:this.map,tileUrl:_11.dataSource.serviceURL});this.map.addLayer(_13);}}}},_mapLoadCompleteHandler:function(){this.map.startup();}});});