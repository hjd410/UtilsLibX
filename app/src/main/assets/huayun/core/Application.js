//>>built
define("com/huayun/core/Application",["../enum/EInputEventType","../event/CanvasMouseEvent","../event/CanvasKeyBoardEvent","custom/gl-matrix"],function(_1,_2,_3,_4){function _5(_6){this.isFlipYCoord=false;this.canvas=_6;this.isSupportMouseMove=false;this.isMouseDown=false;this.isRightMouseDown=false;this.canvas.addEventListener("mousedown",this,false);this.canvas.addEventListener("mouseup",this,false);this.canvas.addEventListener("mousemove",this,false);window.addEventListener("keydown",this,false);window.addEventListener("keyup",this,false);window.addEventListener("keypress",this,false);};_5.prototype.handleEvent=function(_7){switch(_7.type){case "mousedown":this.isMouseDown=true;this.onMouseDown(this._toCanvasMouseEvent(_7,_1.MOUSEDOWN));break;case "mouseup":this.isMouseDown=false;this.onMouseUp(this._toCanvasMouseEvent(_7,_1.MOUSEUP));break;case "mousemove":if(this.isSupportMouseMove){this.onMouseMove(this._toCanvasMouseEvent(_7,_1.MOUSEMOVE));}if(this.isMouseDown){this.onMouseDrag(this._toCanvasMouseEvent(_7,_1.MOUSEDRAG));}break;case "keypress":this.onKeyPress(this._toCanvasBoardEvent(_7,_1.KEYPRESS));break;case "keydown":this.onKeyDown(this._toCanvasBoardEvent(_7,_1.KEYDOWN));break;case "keyup":this.onKeyUp(this._toCanvasBoardEvent(_7,_1.KEYUP));break;}};_5.prototype.onMouseDown=function(_8){};_5.prototype.onMouseUp=function(_9){};_5.prototype.onMouseMove=function(_a){};_5.prototype.onMouseDrag=function(_b){};_5.prototype.onKeyDown=function(_c){};_5.prototype.onKeyUp=function(_d){};_5.prototype.onKeyPress=function(_e){};_5.prototype._viewportToCanvasCoordinate=function(_f){var _10=this.canvas.getBoundingClientRect();if(_f.target){var x=_f.clientX-_10.left;var y=0;y=_f.clientY-_10.top;if(this.isFlipYCoord){y=this.canvas.height-y;}return _4.vec2.fromValues(x,y);}throw new Error("evt.targetä¸ºnull");};_5.prototype._toCanvasMouseEvent=function(evt,_11){if(_11===_1.MOUSEDOWN&&evt.button===2){this.isRightMouseDown=true;}else{if(_11===_1.MOUSEUP&&evt.button===2){this.isRightMouseDown=false;}}var _12=evt.button;if(this.isRightMouseDown&&_11===_1.MOUSEDRAG){_12=2;}var _13=this._viewportToCanvasCoordinate(evt);return new _2(_11,_13,_12,evt.altKey,evt.ctrlKey,evt.shiftKey);};_5.prototype._toCanvasBoardEvent=function(evt,_14){return new _3(_14,evt.key,evt.keyCode,evt.repeat,evt.altKey,evt.ctrlKey,evt.shiftKey);};return _5;});