//>>built
define("com/huayun/core/EventEmitter",[],function(){function g(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a[d];return c}function k(a,b,c,h){var f,e;if("function"!==typeof c)throw Error("listener must be function");f=a._events;void 0===f?(f=a._events=Object.create(null),a._eventsCount=0):(void 0!==f.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),f=a._events),e=f[b]);void 0===e?(e=f[b]=c,++a._eventsCount):("function"===typeof e?e=f[b]=h?[c,e]:[e,c]:h?e.unshift(c):e.push(c),b=void 0===a._maxListeners?
d.defaultMaxListeners:a._maxListeners,0<b&&e.length>b&&!e.warned&&console.warn("Possible EventEmitter memory leak detected."));return a}function l(a,b,c){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:c};b=q.bind(a);b.listener=c;return a.wrapFn=b}function q(){this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,this.listener.apply(this.target,Array.prototype.slice.call(arguments,0)))}function m(a,b,c){a=a._events;if(void 0===a)return[];b=a[b];if(void 0===b)return[];if("function"===
typeof b)return c?[b.listener||b]:[b];if(c)for(c=Array(b.length),a=0;a<c.length;++a)c[a]=b[a].listener||b[a];else c=g(b,b.length);return c}function d(){d.init.call(this)}function n(a){var b=this._events;if(void 0!==b){a=b[a];if("function"===typeof a)return 1;if(void 0!==a)return a.length}return 0}var p=10;Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(a){if("number"!==typeof a||0>a||Number.isNaN(a))throw Error("defaultMaxListeners must be a positive number!");
p=a}});d.prototype._events=void 0;d.prototype._eventsCount=0;d.prototype._maxListeners=void 0;d.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};d.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||Number.isNaN(a))throw Error("defaultMaxListeners must be a positive number!");this._maxListeners=a;return this};d.prototype.getMaxListeners=function(){return void 0===
this._maxListeners?d.defaultMaxListeners:this._maxListeners};d.prototype.emit=function(a){var b="error"===a,c=this._events;if(void 0!==c)b=b&&void 0===c.error;else if(!b)return!1;if(b){var d;1<arguments.length&&(d=arguments[1]);if(d instanceof Error)throw d;}c=c[a];if(void 0===c)return!1;if("function"===typeof c)c.apply(this,Array.prototype.slice.call(arguments,1));else for(b=c.length,c=g(c,b),d=0;d<b;++d)c[d].apply(this,Array.prototype.slice.call(arguments,1));return!0};d.prototype.addListener=function(a,
b){return k(this,a,b,!1)};d.prototype.on=d.prototype.addListener;d.prototype.prependListener=function(a,b){return k(this,a,b,!0)};d.prototype.once=function(a,b){if("function"!==typeof b)throw Error("listener must be function!");this.on(a,l(this,a,b));return this};d.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw Error("listener must be function!");this.prependListener(a,l(this,a,b));return this};d.prototype.removeListener=function(a,b){var c,d,f,e,g;if("function"!==typeof b)throw Error("listener must be function!");
d=this._events;if(void 0===d)return this;c=d[a];if(void 0===c)return this;if(c===b||c.listener===b)0===--this._eventsCount?this._events=Object.create(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!==typeof c){f=-1;for(e=c.length-1;0<=e;e--)if(c[e]===b||c[e].listener===b){g=c[e].listener;f=e;break}if(0>f)return this;0===f?c.shift():c.splice(f,1);1===c.length&&(d[a]=c[0]);void 0!==d.removeListener&&this.emit("removeListener",a,g||b)}return this};
d.prototype.off=d.prototype.removeListener;d.prototype.removeAllListeners=function(a){var b,c;c=this._events;if(void 0===c)return this;if(void 0===c.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[a]&&(0===--this._eventsCount?this._events=Object.create(null):delete c[a]),this;if(0===arguments.length){b=Object.keys(c);var d;for(c=0;c<b.length;++c)d=b[c],"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}b=c[a];if("function"===typeof b)this.removeListener(a,b);else if(void 0!==b)for(c=b.length-1;0<=c;c--)this.removeListener(a,b[c]);return this};d.prototype.listeners=function(a){return m(this,a,!0)};d.prototype.rawListeners=function(a){return m(this,a,!1)};d.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):n.call(a,b)};d.prototype.listenerCount=n;d.prototype.eventNames=function(){return 0<this._eventsCount?
Object.keys(this._events):[]};return d});