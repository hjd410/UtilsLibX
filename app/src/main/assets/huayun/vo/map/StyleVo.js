//>>built
define("com/huayun/vo/map/StyleVo",["../../util/JSONFormatterUtil","../../webgis/utils/utils"],function(_1,_2){var _3=/(.+)\.(.+)/;function _4(_5,_6){this.styleId="";this.type=_5.type;var _7=_1.formatterKey(_5);for(var _8 in _7){if(_7.hasOwnProperty(_8)){this.parseStyle(_8,_7[_8]);}}for(var j=0,_9=_6.length;j<_9;j++){var _a=_6[j];if(_a.type==="point"||_a.type==="line"||_a.type==="1001"||_a.type==="1002"){if(!_a.hasOwnProperty("affectlayers")){_a["affectlayers"]="1";}}}for(var i=0,_9=_6.length;i<_9;i++){var _a=_6[i];if(_a.id===this.styleId){this.symbol=_2.clone(_a.symbols);for(var j=0;j<this.symbol.length;j++){var _b=this.symbol[j];if(_a["affectlayers"]!==undefined){var _c=_a["affectlayers"].split(",");this.parseAffectLayers(_c,this.symbol);}var _d=_b.hasOwnProperty("marker");if(_d){if(typeof _b["marker"]==="string"){_b["marker"]=this.findStyleById(_b["marker"],_6);}}var _e=_b.hasOwnProperty("outline");if(_e){if(typeof _b["outline"]==="string"){_b["outline"]=this.findStyleById(_b["outline"],_6);}}}}}};_4.prototype.parseAffectLayers=function(_f,_10){for(var i=0;i<_f.length;i++){var _11=_f[i]-1;var _12=_10[_11];if(_12&&_12.hasOwnProperty("color")){_12["color"]=this.color||_12["color"];}if(_12&&_12.hasOwnProperty("fill")){_12["fill"]=this.color||_12["fill"];}if(_12&&(_12.hasOwnProperty("fill-one")||_12.hasOwnProperty("fill-two"))){_12["fill-one"]=this["fill-one"]||_12["fill-one"];_12["fill-two"]=this["fill-two"]||_12["fill-two"];}if(_12&&_12.hasOwnProperty("stroke")){_12["stroke"]=this.stroke||_12["stroke"];}}};_4.prototype.parseStyle=function(key,_13){if(Object.prototype.toString.call(_13)==="[object String]"){this[key]=_13;}else{if(Object.prototype.toString.call(_13)==="[object Number]"){this[key]=_13.toString();}else{if(Object.prototype.toString.call(_13)==="[object Object]"){this[key]=_1.formatterKey(_13);}}}};_4.prototype.findStyleById=function(id,_14){var _15=null;for(var i=0;i<_14.length;i++){var _16=_14[i];if(id===_16.id){var _17=_16.symbols;var _18=_16["affectlayers"].split(",");this.parseAffectLayers(_18,_17);_15=_16;break;}}return _15;};return _4;});