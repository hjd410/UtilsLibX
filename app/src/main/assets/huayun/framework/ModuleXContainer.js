//>>built
define("com/huayun/framework/ModuleXContainer",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","../util/HashTableEx","../facades/ConfigFacade","../util/StringHelp","../widget/ModuleX"],function(_1,_2,_3,_4,_5,_6,_7){return _1("com.huayun.framework.ModuleXContainer",[_7],{constructor:function(){this.cacheHash=new _4();this.dispalyListHash=new _4();this.moduleXHash=new _4();this.currentId="";this.currentIdentifyId="";this._configFacade=new _5();this.preLoadVo=[];this.unPreLoadVo=[];this.currentModuleXVo=null;this.currentReadyFun=null;this.complete=null;this.doLoadComplete=null;},postCreate:function(){this.inherited(arguments);_3.set(this.domNode,"pointer-events","none");_3.set(this.domNode,"width","100%");_3.set(this.domNode,"height","100%");},createModuleX:function(id,_8,_9){this.complete=_9;var _a=this.cacheHash.get(id,_8);if(!_6.isSpace(_a)){_9.call(this,_a);}else{var _b=this.moduleXHash.get(id,_8);if(_6.isSpace(_b)){var _c=this.context.get("hash").getKeyList();for(var i=0;i<_c.length;i++){if(_c[i]===id){var _d=this.context.get("hash").get(id);if(!_6.isSpace(_d.propertys)){var _e=/^\$\{(.*)\}$/;for(var j=0;j<_d.propertys.length;j++){var _f=_d.propertys[j].name;var _10=_d.propertys[j].value;if(_e.test(_10)){_10=_6.extractProerty(_10);_d.propertys[j].value=this.context.findConfigvalue(_10);continue;}}}this.moduleXHash.put(id,_8,_d);}}}this.context.getBeanEx(id,_8,this.getBeanHandler.bind(this));}},doLoadModuleX:function(_11){var _12=this.get("configData");this.complete=_11;for(var i=0;i<_12["configuration"].container.modules.length;i++){var _13=_12["configuration"].container.modules[i];this.moduleXHash.put(_13.id,_13.identifyId,_13);}this.modulePreLoad();},modulePreLoad:function(){var _14=this.moduleXHash.getKeyList();for(var i=0;i<_14.length;i++){var _15=_14[i];var _16=this.moduleXHash.get(_15.majorKey,_15.deputyKey);for(var j=0;j<_16.propertys.length;j++){if(_16.propertys[j].name==="configUrl"){_16.configUrl=_16.propertys[j].value;}}if(_16.preLoad){this.preLoadVo[this.preLoadVo.length]=_16;}}this._addPreModule();},_addPreModule:function(){if(this.preLoadVo.length>0){var vo=this.preLoadVo.shift();this.createModuleX(vo.id,vo.identifyId,this.complete);}else{this.complete.call(this);}},addModuleX:function(_17){},getBeanHandler:function(_18){var _19,_1a;_19=typeof _18.identifyId==="undefined"?_18.id:_18.id.slice(0,-_18.identifyId.length);_1a=_18.identifyId;this.cacheHash.put(_19,_1a,_18);this.dispalyListHash.put(_19,_1a,_18);var _1b=this.moduleXHash.get(_19,_1a);_18.set("moduleXVo",_1b);_18.set("propertys",_1b.propertys);_18.set("style",_1b.style);var _1c=_1b["setMethod"];if(!_6.isSpace(_1c)){for(var j=0;j<_1c.length;j++){var _1d=_1c[j];_18.set(_1d.name,_1d.value);}}_18.set("onReadyFun",this._addPreModule.bind(this,_18));_18.placeAt(this);_18.startup();},doInit:function(){this.doLoadModuleX(function(){}.bind(this));},findModuleX:function(id,_1e){return this.dispalyListHash.get(id,_1e);},closeModuleX:function(id,_1f){var mc=this.cacheHash.get(id,_1f);mc.destroy();},destroyModuleX:function(id,_20){var mc=this.cacheHash.get(id,_20);mc.destroy();this.cacheHash.remove(id,_20);this.dispalyListHash.remove(id,_20);}});});