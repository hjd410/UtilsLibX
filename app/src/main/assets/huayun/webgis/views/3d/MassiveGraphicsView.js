//>>built
define("com/huayun/webgis/views/3d/MassiveGraphicsView",["exports","custom/gl-matrix-min","com/huayun/webgis/geometry/Point","com/huayun/webgis/gl/mode","com/huayun/webgis/data/bucket/MassiveFillBucketSimplify"],function(_1,_2,_3,_4,_5){var _6=function(_7,_8,_9){var _a=_7.feature.geometry;var _b=_8.viewpoint.center,cx=_b[0],cy=_b[1];var _c=_a.path;var g=[];for(var i=0;i<_c.length;i++){var _d=_c[i];var l=[];for(var j=0;j<_d.length;j++){var p=_d[j];l.push(new _3(p.x-cx,p.y-cy,0));}g.push(l);}var _e=new _5();_e.addFeature(g);_e.upload(_8.context);_7.bucket=_e;_7.position=[cx,cy];};var _f=function(_10,_11){var _12=_4.ColorMode.alphaBlended;var _13=_10.depthModeForSublayer(1,_4.DepthMode.ReadOnly);var _14=_10.view.context;var gl=_14.gl;var _15=_11.bucket;var _16=_10.view.useProgramSimplify("basicFill",{layoutAttributes:[{name:"a_pos",type:"Float32",components:2,offset:0}]});var _17=_11.highLightSymbol||_11.symbol;var _18=_17.uniforms;var _19=_11.position;_18["u_matrix"]=_10.transform.getMatrixForPoint(_19[0],_19[1]);_16.drawMassive(_14,gl.TRIANGLES,_13,null,_12,_4.CullFaceMode.disabled,_18,_11.id,_15.layoutVertexBuffer,_15.indexBuffer,_15.segments,null,_10.transform.level);};_1.draw={polygon:_f};_1.add={polygon:_6};});