//>>built
define("com/huayun/webgis/views/3d/SceneGraphicsView",["exports","custom/gl-matrix-min","com/huayun/webgis/gl/mode","com/huayun/webgis/data/ArrayType","com/huayun/webgis/gl/SegmentVector","com/huayun/webgis/geometry/Point"],function(_1,_2,_3,_4,_5,_6){var _7=function(_8,_9,_a){var _b=_8.feature.geometry;var _c=_9.viewpoint.center,cx=_c[0],cy=_c[1];var _d=_b.path;var g=[];for(var i=0;i<_d.length;i++){var _e=_d[i];var l=[];for(var j=0;j<_e.length;j++){var p=_e[j];l.push([Math.round(p.x-cx),Math.round(p.y-cy),Math.round(p.z-0)]);}g.push(l);}_8.position=[cx,cy];_8.lines=g;var _f=_8.symbol.segment;var _10=new _4.StructArrayLayout1f4();for(i=0;i<_f;i++){_10.emplaceBack(i/_f);}_8.layoutVertexArray=_9.context.createVertexBuffer(_10,[{name:"a_ratio",type:"Float32",components:1,offset:0}]);_8.rasterBoundsSegments=_5.simpleSegment(0,0,_f,1);};var _11=function(_12,_13){var _14=_12.view.context;var gl=_14.gl;var _15=_12.depthModeForSublayer(0,_3.DepthMode.ReadOnly);var _16=_3.ColorMode.srcBlended;var _17=_13.symbol;var _18=_12.view.useProgramSimplify("lineParticle",{layoutAttributes:[{name:"a_ratio",type:"Float32",components:1,offset:0}]});var _19=_17.uniforms;var _1a=_13.position;_19["u_matrix"]=_12.transform.getMatrixForPoint(_1a[0],_1a[1]);var _1b=_13.lines;for(var i=0;i<_1b.length;i++){var _1c=_1b[i];_19["u_source_position"]=_1c[0];_19["u_target_position"]=_1c[1];_18.drawArray(_14,gl.POINTS,_15,null,_16,_3.CullFaceMode.disabled,_19,"arcParticle",_13.layoutVertexArray,null,_13.rasterBoundsSegments);}};_1.draw={"lineParticle":_11};_1.add={"lineParticle":_7};});