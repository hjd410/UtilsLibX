//>>built
define("com/huayun/webgis/views/3d/MultiGraphicsView",["exports","custom/gl-matrix-min","com/huayun/webgis/geometry/Point2D","com/huayun/webgis/gl/mode","com/huayun/webgis/data/bucket/MultiCircleBucketSimplify","com/huayun/webgis/data/bucket/MultiFillBucketSimplify"],function(_1,_2,_3,_4,_5,_6){var _7=function(_8,_9,_a){var _b=new _5();var _c=_9.viewpoint.center,cx=_c[0],cy=_c[1];var g=_8.feature.geometry;var _d=_8.feature.attributes.colors;_b.addFeature([g.points],_d);_b.upload(_9.context);_8.bucket=_b;_8.position=[cx,cy];};var _e=function(_f,_10){var _11=_f.view.context;var gl=_11.gl;var _12=_f.depthModeForSublayer(0,_4.DepthMode.ReadOnly);var _13=_4.StencilMode.disabled;var _14=_4.ColorMode.alphaBlended;var _15=_10.bucket;var _16=_f.view.useProgramSimplify("multiCircles",{layoutAttributes:[{name:"a_pos",type:"Float32",components:2,offset:0},{name:"a_color",type:"Float32",components:3,offset:8}]});var _17=_10.symbol;var _18=_17.uniforms;var _19=_10.position;_18["u_matrix"]=_f.transform.getMatrixForPoint(_19[0],_19[1]);_18["u_camera_to_center_distance"]=_f.transform.cameraToCenterDistance;var _1a=_f.transform.resolution;var _1b=_17.pitchWithMap;var _1c=_17.fixedSize;if(_1b){if(_1c){_18["u_extrude_scale"]=[_1a,_1a];}else{_18["u_extrude_scale"]=[1,1];}}else{_18["u_extrude_scale"]=_f.transform.pixelsToGLUnits;}_16.draw(_11,gl.TRIANGLES,_12,_13,_14,_4.CullFaceMode.disabled,_18,_10.id,_15.layoutVertexBuffer,_15.indexBuffer,_15.segments,null,_f.transform.level);};var _1d=function(_1e,_1f,_20){var _21=_1e.feature.geometry;var _22=_1f.viewpoint.center,cx=_22[0],cy=_22[1];var _23=_21.path;var g=[];for(var i=0;i<_23.length;i++){var _24=_23[i];var l=[];for(var j=0;j<_24.length;j++){var p=_24[j];l.push(new _3(p.x-cx,p.y-cy,0));}g.push(l);}var _25=new _6();_25.addFeature(g,_1e.feature.attributes.colors);_25.upload(_1f.context);_1e.bucket=_25;_1e.position=[cx,cy];};var _26=function(_27,_28){var _29=_4.ColorMode.srcBlended;var _2a=_27.depthModeForSublayer(1,_4.DepthMode.ReadOnly);var _2b=_27.view.context;var gl=_2b.gl;var _2c=_28.bucket;var _2d=_27.view.useProgramSimplify("multiPolygon",{layoutAttributes:[{name:"a_pos",type:"Float32",components:2,offset:0},{name:"a_color",type:"Float32",components:4,offset:8}]});var _2e=_28.symbol;var _2f=_2e.uniforms;var _30=_28.position;_2f["u_matrix"]=_27.transform.getMatrixForPoint(_30[0],_30[1]);_2d.draw(_2b,gl.TRIANGLES,_2a,null,_29,_4.CullFaceMode.disabled,_2f,_28.id,_2c.layoutVertexBuffer,_2c.indexBuffer,_2c.segments,null,_27.transform.level);};_1.draw={point:_e,polygon:_26};_1.add={point:_7,polygon:_1d};});