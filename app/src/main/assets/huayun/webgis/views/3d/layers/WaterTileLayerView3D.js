//>>built
define("com/huayun/webgis/views/3d/layers/WaterTileLayerView3D",["dojo/_base/declare","./LayerView3D","com/huayun/webgis/layers/support/Tile","../../../utils/utils","com/huayun/webgis/gl/draw/drawWater","com/huayun/webgis/gl/mode","com/huayun/webgis/data/ArrayType","com/huayun/webgis/utils/Constant","com/huayun/webgis/gl/members","com/huayun/webgis/gl/SegmentVector"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1("com.huayun.webgis.views.3d.layers.WaterTileLayerView3D",[_2],{constructor:function(_b){_1.safeMixin(this,_b);this.visible=_b.visible;this.id=_b.id;this.layer=_b.layer;this.view=_b.view;},refresh:function(){this.view.threeRender();},_readyData:function(){},_render:function(){if(this.visible){var _c=this.view.viewpoint.level;var _d=this.view.ground.sourceCache;var _e=_d.getVisibleCoordinates(false,this.transform).slice().reverse();this.renderPass="translucent";this.depthRangeFor3D=[0,1-((1+this.view.currentLayer)*this.view.numSublayers)*this.view.depthEpsilon];this.renderLayer(this,_d,null,_e);}},renderLayer:function(_f,_10,_11,_12,_13){if(!_12.length){return;}_5(_f,_10,_11,_12);},setVisible:function(_14){this.visible=_14;if(_14){this.refresh();}else{this.view.threeRender();}},zoom:function(){if(this.visible){var _15=this.view.ground.sourceCache;var _16=_15.updateTileMatrix(false,this.view.viewpoint).slice().reverse();this.renderPass="translucent";this.depthRangeFor3D=[0,1-((1+this.view.currentLayer)*this.view.numSublayers)*this.view.depthEpsilon];this.renderLayer(this,_15,null,_16);}},depthModeForSublayer:function(n,_17,_18){return new _6.DepthMode(_18||this.view.context.gl.LEQUAL,_17,this.depthRangeFor3D);}});});