//>>built
define("com/huayun/webgis/views/3d/SpecialGraphicView",["exports","custom/gl-matrix-min","com/huayun/webgis/geometry/Point","com/huayun/webgis/gl/mode","com/huayun/webgis/data/bucket/CircleBucketSimplify"],function(_1,_2,_3,_4,_5){var _6=function(_7,_8,_9){var _a=new _5();var _b=_8.viewpoint.center,cx=_b[0],cy=_b[1];var g=_7.feature.geometry;_a.addFeature([[new _3(Math.round(g.x-cx),Math.round(g.y-cy))]]);_a.upload(_8.context);_7.bucket=_a;_7.position=[cx,cy];};var _c=function(_d,_e){var _f=_d.view.context;var gl=_f.gl;var _10=_d.depthModeForSublayer(0,_4.DepthMode.ReadOnly);var _11=_4.StencilMode.disabled;var _12=_4.ColorMode.alphaBlended;var _13=_e.bucket;var _14=_d.view.useProgramSimplify("fan",{layoutAttributes:[{name:"a_pos",type:"Float32",components:2,offset:0}]});var _15=_e.symbol;_15.subSymbols.forEach(function(_16){var _17=_16.uniforms;var _18=_e.position;_17["u_matrix"]=_d.transform.getMatrixForPoint(_18[0],_18[1]);_17["u_camera_to_center_distance"]=_d.transform.cameraToCenterDistance;var _19=_d.transform.resolution;var _1a=_16.pitchWithMap;var _1b=_16.fixedSize;_17["stroke_width"]=_16.strokeWidth*_19;_17["gap"]=_16.strokeWidth*_19/_16.radius;if(_1a){if(_1b){_17["u_extrude_scale"]=[_19,_19];}else{_17["u_extrude_scale"]=[1,1];}}else{_17["u_extrude_scale"]=_d.transform.pixelsToGLUnits;}_14.draw(_f,gl.TRIANGLES,_10,_11,_12,_4.CullFaceMode.disabled,_17,_e.id,_13.layoutVertexBuffer,_13.indexBuffer,_13.segments,null,_d.transform.level);}.bind(this));};_1.draw={typhoon:_c};_1.add={typhoon:_6};});