//>>built
define("com/huayun/webgis/views/GraphicView",[],function(){function _1(_2){this.declaredClass="com.huayun.webgis.views.GraphicView";this._group=_2.group;this.view=_2.view;};_1.prototype.renderGraphic=function(_3,_4,_5){var _6=_3.symbol;var _7=_3.feature;switch(_6.type){case "line":this._renderLine(_6,_7,_3,_4);break;case "point":this._renderPoint(_6,_7,_3,_4,_5);break;case "polygon":this._renderPolygon(_6,_7,_3,_4);break;case "image":this._renderImage(_6,_7,_3,_4,_5);break;}};_1.prototype._renderLine=function(_8,_9,_a,_b){var _c=_9.geometry;var g=new THREE.Geometry();var _d;var _e=_b.position;for(var i=0;i<_c.length;i++){_d=this.view._geometryToScene(_c[i].x,_c[i].y,_c[i].z);g.vertices.push(new THREE.Vector3(_d.x-_e.x,_d.y-_e.y,0.5));}var m=_8.material;var _f=new THREE.Line(g,m);_f.userData={feature:_9};_a.id=_f.uuid;_a.rendered=true;_a.mesh=_f;_a.sameMaterial=true;_b.add(_f);};_1.prototype._renderPoint=function(_10,_11,_12,_13){var _14=_11.geometry;var _15=this.view._geometryToScene(_14.x,_14.y,_14.z);var pos=_13.position;var _16;if(!_10.mesh){var _17=new THREE.Sprite(_10.material);var _18=1/this.view.initZ*_10.size;_17.scale.set(_18,_18,1);_10.mesh=_17;}_16=_10.mesh.clone();_16.position.set(_15.x-pos.x,_15.y-pos.y,_15.z-pos.z);_16.userData={feature:_11};_12.id=_16.uuid;_12.rendered=true;_12.mesh=_16;_12.sameMaterial=true;_12.sameGeometry=true;_12.hasTexture=true;_13.add(_16);};_1.prototype._renderPolygon=function(_19,_1a,_1b,_1c){var _1d=_1a.geometry;var _1e=_1d.path;var pos=_1c.position;var _1f=this.view._geometryToScene(_1e[0].x,_1e[0].y,_1e[0].z);var _20=new THREE.Shape();_20.moveTo(_1f.x-pos.x,_1f.y-pos.y,0.5);for(var i=1;i<_1e.length;i++){var _21=this.view._geometryToScene(_1e[i].x,_1e[i].y,_1e[i].z);_20.lineTo(_21.x-pos.x,_21.y-pos.y,0.5);}var g=new THREE.ShapeGeometry(_20);if(_1b.id===0){var m=_19.material;var _22=new THREE.Mesh(g,m);_22.userData={feature:_1a};_1b.id=_22.uuid;_1b.mesh=_22;_1b.sameMaterial=true;_1c.add(_22);}else{var _23=_1b.mesh;_23.geometry=g;}};_1.prototype._renderImage=function(_24,_25,_26,_27,_28){var _29=_25.geometry;var _2a=this.view._geometryToScene(_29.x,_29.y,_29.z);var pos=_27.position;var _2b;if(!_24.mesh){var geo=new THREE.PlaneGeometry(_24.width,_24.height);_24.mesh=new THREE.Mesh(geo,_24.material);_24.rendered=true;}_2b=_24.mesh.clone();_2b.position.set(_2a.x-pos.x,_2a.y-pos.y,0.2);_2b.scale.set(_28,_28,1);_2b.userData={feature:_25};_26.id=_2b.uuid;_26.rendered=true;_26.mesh=_2b;_26.sameMaterial=true;_26.sameGeometry=true;_26.hasTexture=true;_27.add(_2b);};return _1;});