//>>built
define("com/huayun/webgis/action/search/ReactionSearch",["dojo/_base/declare","dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-style","dojo/dom-construct","dojo/_base/window","dojo/debounce","../../geometry/Point2D","../ActiveMapAction"],function(_1,on,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1("com.huayun.webgis.action.search.ReactionSearch",[_a],{constructor:function(_b){_1.safeMixin(this,_b);this.view=_b.view;this.state=false;this.power=this.view.map.findLayerById("power");this._onClick=null;},active:function(){if(!this.state){this.state=true;this.view.selectEnabled=true;this._onClick=on(this.view.domNode,"mousemove",_8(this._mouseClick.bind(this),500));}},_mouseClick:function(e){this.doAction(e);},invalid:function(){this.view.panEnabled=true;_4.publish("closeDevInfo");this._endActionMethod.call(this);},doAction:function(e){if(this.view.selectEnabled){var _c=this.view.screenToGeometry(e.clientX,e.clientY);var _d=this.power.queryFeaturesByGeometry(_c,10);if(_d&&_d.length>0&&this.state){_4.publish("showDevInfo",_d,e);}else{_4.publish("closeDevInfo");}}},_endActionMethod:function(){this.state=false;_4.publish("closeDevInfo");if(this._onClick){this._onClick.remove();this._onClick=null;}}});});