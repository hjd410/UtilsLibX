//>>built
define("com/huayun/webgis/action/HeatmapAction",["dojo/_base/declare","dojo/topic","./MapAction"],function(_1,_2,_3){return _1("com.huayun.webgis.action.HeatmapAction",[_3],{targetLayerId:null,targetLayer:null,constructor:function(_4){_1.safeMixin(this,_4);this.targetLayer=this.map.findLayerById(this.targetLayerId);},active:function(_5){this.activeState=_5;var _6=this.map.level;if(_5){var _7=new Date(),_8=_7.getHours()+":"+_7.getMinutes()+":"+_7.getSeconds();this.targetLayer.withPower=true;this.targetLayer.powerTime=_8;_2.publish("heatmapShow",true);this.targetLayer.updatePower(_8,true,15761408);}else{var _9=this.map.mapType;this.targetLayer.withPower=false;_2.publish("heatmapShow",false);if(_6>12){if(_9.type=="basic"&&_9.more.night){this.targetLayer.updatePower(null,true,2831164,0.85);}else{this.targetLayer.updatePower(null,true,15658734,0.85);}}else{this.targetLayer.plane.visible=false;}}}});});