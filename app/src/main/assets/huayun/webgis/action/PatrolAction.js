//>>built
define("com/huayun/webgis/action/PatrolAction",["dojo/_base/declare","dojo/topic","./MapAction"],function(_1,_2,_3){return _1("com.huayun.webgis.action.PatrolAction",[_3],{pointsPos:null,counts:null,speeds:null,lens:null,raf:null,constructor:function(_4){_1.safeMixin(this,_4);this.pointsPos=[{x:310,y:4700},{x:6195,y:5076},{x:5870,y:377},{x:-30,y:0}];this.counts=[940,1177,940,1180];var _5=this.pointsPos[0].x/this.counts[0],_6=this.pointsPos[0].y/this.counts[0],_7=(this.pointsPos[1].x-this.pointsPos[0].x)/this.counts[1],_8=(this.pointsPos[1].y-this.pointsPos[0].y)/this.counts[1],_9=(this.pointsPos[1].x-this.pointsPos[2].x)/this.counts[2],_a=(this.pointsPos[1].y-this.pointsPos[2].y)/this.counts[2],_b=(this.pointsPos[2].x-this.pointsPos[3].x)/this.counts[3],_c=(this.pointsPos[2].y-this.pointsPos[3].y)/this.counts[3];this.speeds=[{spx:_5,spy:_6},{spx:_7,spy:_8},{spx:_9,spy:_a},{spx:_b,spy:_c}];var _d=this.counts[0],_e=_d+this.counts[1]+1,_f=_e+this.counts[2]+1,_10=_f+this.counts[3]+1;this.lens=[_d,_e,_f,_10];},active:function(_11){this.activeState=_11;if(_11){this.map.panAble=false;this.map.zoomAble=false;this.map.rotateAble=false;this.flyMove(0,true);}else{this.map.panAble=true;this.map.zoomAble=true;this.map.rotateAble=true;cancelAnimationFrame(this.raf);}},flyMove:function(i,_12){if(i<this.lens[0]){if(!_12){this.map.rotateMap(-90);_12=true;i--;}else{this.map.patrol(this.speeds[0].spx,this.speeds[0].spy);}i++;this.raf=requestAnimationFrame(this.flyMove.bind(this,i,_12));}else{if(i<this.lens[1]){if(_12){this.map.rotateMap(-90);_12=false;}else{this.map.patrol(this.speeds[1].spy,this.speeds[1].spx);}i++;this.raf=requestAnimationFrame(this.flyMove.bind(this,i,_12));}else{if(i<this.lens[2]){if(!_12){this.map.rotateMap(-90);_12=true;}else{this.map.patrol(this.speeds[2].spx,this.speeds[2].spy);}i++;this.raf=requestAnimationFrame(this.flyMove.bind(this,i,_12));}else{if(i<this.lens[3]){if(_12){this.map.rotateMap(-90);_12=false;}else{this.map.patrol(this.speeds[3].spy,this.speeds[3].spx);}i++;this.raf=requestAnimationFrame(this.flyMove.bind(this,i,_12));}else{this.map.rotateMap(-90);_12=true;i++;_2.publish("patrolOver");}}}}}});});