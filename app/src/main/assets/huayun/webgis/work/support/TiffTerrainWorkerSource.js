//>>built
define("com/huayun/webgis/work/support/TiffTerrainWorkerSource",["../../utils/Resource","../../layers/support/terrainUtils"],function(_1,_2){var _3=function _3(_4,_5){this.actor=_4;this.loading={};this.loaded={};};_3.prototype.loadTerrain=function loadTerrain(_6,_7){var r=_1.loadArrayBuffer(_6.url,function(_8,_9){if(_8){_7(_8);}else{if(_9){var _a=_2.createHyTerrainData(_9,_6.rectangle,_6.resolution);_7(null,_a);}}});return function(){r.cancel();_7();};};_3.prototype.reloadTile=function reloadTile(_b,_c){var _d=this.loaded,_e=_b.uid,_f=this;if(_d&&_d[_e]){var _10=_d[_e];_10.showCollisionBoxes=_b.showCollisionBoxes;var _11=function(err,_12){var _13=_10.reloadCallback;if(_13){delete _10.reloadCallback;_10.parse(_10.vectorTile,_f.layerIndex,_f.actor,_13);}_c(err,_12);};if(_10.status==="parsing"){_10.reloadCallback=_11;}else{if(_10.status==="done"){if(_10.vectorTile){_10.parse(_10.vectorTile,this.layerIndex,this.actor,_11);}else{_11();}}}}};_3.prototype.abortTile=function abortTile(_14,_15){var _16=this.loading,uid=_14.uid;if(_16&&_16[uid]&&_16[uid].abort){_16[uid].abort();delete _16[uid];}_15();};_3.prototype.removeTile=function removeTile(_17,_18){var _19=this.loaded,uid=_17.uid;if(_19&&_19[uid]){delete _19[uid];}_18();};return _3;});