//>>built
define("com/huayun/webgis/work/Dispatcher",["../utils/utils","./Actor","./workerPool"],function(_1,_2,_3){var id=1;var _4=function _4(_5){this.workerPool=_3;this.actors=[];this.currentActor=0;this.id=id++;var _6=this.workerPool.acquire(this.id);for(var i=0;i<_6.length;i++){var _7=_6[i];var _8=new _4.Actor(_7,this.id,_5);_8.name="Worker "+i;this.actors.push(_8);}};_4.prototype.broadcast=function broadcast(_9,_a,cb){cb=cb||function(){};_1.asyncAll(this.actors,function(_b,_c){_b.send(_9,_a,_c);},cb);};_4.prototype.send=function send(_d,_e,_f,_10){if(typeof _10!=="number"||isNaN(_10)){_10=this.currentActor=(this.currentActor+1)%this.actors.length;}this.actors[_10].send(_d,_e,_f);return _10;};_4.prototype.remove=function remove(){this.actors.forEach(function(_11){_11.remove();});this.actors=[];this.workerPool.release(this.id);};_4.Actor=_2;return _4;});