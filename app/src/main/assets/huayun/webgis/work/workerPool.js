//>>built
define("com/huayun/webgis/work/workerPool",["require"],function(_1){var _2;if(_2){return _2;}var _3=Math.floor(window.navigator.hardwareConcurrency/2);var _4=Math.max(Math.min(_3,6),4);var _5=_1.toUrl("dojo");var _6="dojoConfig = {\n"+"    baseUrl : '"+_5+"',\n"+"    async: 1\n"+"};\n"+"self.importScripts('"+_5+"/dojo-lite.js');\n"+"\n"+"require([\n"+"    \"com/huayun/webgis/work/support/BaseWorker\"\n"+"], function (BaseWorker) {\n"+"    if (typeof WorkerGlobalScope !== 'undefined' && typeof self !== 'undefined' && self instanceof WorkerGlobalScope) {\n"+"        self.worker = new BaseWorker(self);\n"+"    }\n"+"});";var _7=function _7(){this.active={};};_7.prototype.acquire=function acquire(_8){if(!this.workers){this.workers=[];while(this.workers.length<_4){var _9=new Blob([_6],{type:"text/javascript"});this.workers.push(new Worker(URL.createObjectURL(_9)));}}this.active[_8]=true;return this.workers.slice();};_7.prototype.release=function release(_a){delete this.active[_a];if(Object.keys(this.active).length===0){this.workers.forEach(function(w){w.terminate();});this.workers=null;}};_2=new _7();return _2;});