//>>built
define("com/huayun/webgis/symbols/support/GlyphAtlas",["../../gl/potpack","../../utils/image"],function(_1,_2){var _3=1;return function(_4){var _5={};var _6=[];for(var _7 in _4){var _8=_4[_7];var _9=_5[_7]={};for(var id in _8){var _a=_8[+id];if(!_a||_a.bitmap.width===0||_a.bitmap.height===0){continue;}var _b={x:0,y:0,w:_a.bitmap.width+2*_3,h:_a.bitmap.height+2*_3};_6.push(_b);_9[id]={rect:_b,metrics:_a.metrics};}}var _c=_1(_6);var w=_c.w;var h=_c.h;var _d=new _2.AlphaImage({width:w||1,height:h||1});for(var _e in _4){var _f=_4[_e];for(var _10 in _f){var _11=_f[+_10];if(!_11||_11.bitmap.width===0||_11.bitmap.height===0){continue;}var _12=_5[_e][_10].rect;_2.AlphaImage.copy(_11.bitmap,_d,{x:0,y:0},{x:_12.x+_3,y:_12.y+_3},_11.bitmap);}}this.image=_d;this.positions=_5;};});