//>>built
define("com/huayun/webgis/facade/GeoJSONFacade",["dojo/_base/declare","dojo/request","dojo/request/handlers","dojo/request/script"],function(_1,_2,_3,_4){var _5=256;var _6=-5466274.966255;var _7=10345174.966255;var _8=8669.88400643468;_Pixel2ToXian80=function(_9,_a,_b,_c,_d){var r=_8/(1<<_d);var _e=[];for(var i=0;i<_a.length;i++){var _f=[];if(i%2==0){var x=Math.floor(((_a[i]/_5/16+_b)*r*_5+_6)*100)/100;var y=Math.floor((_7-(_a[i+1]/_5/16+_c)*r*_5)*100)/100;_f.push(x);_f.push(y);_e.push(_f);}}return _e;};_getFeatureCollection=function(_10){return {"type":"FeatureCollection","features":_10};};_getFeature=function(_11,_12,_13){return {"type":"Feature","geometry":_getGeometrys(_11,_13),"properties":_getProperties(_12)};};_getGeometrys=function(_14,_15){return {"type":_15,"coordinates":[_14]};};_getProperties=function(_16){return _16;};return _1("com.huayun..webgis.facade.GeoJSONFacade",null,{_url:"",_reg:/{\w}/,constructor:function(){this._url=arguments[0].url;},getGeoJSON:function(_17,col,row){var url=this._url,obj=this;url=url.replace(this._reg,_17).replace(this._reg,col).replace(this._reg,row);return new Promise(function(_18,_19){var xhr=new XMLHttpRequest();xhr.open("GET",url);xhr.responseType="arraybuffer";xhr.onload=function(){var _1a=xhr.response;var _1b=new ol.format.MVT();var _1c=_1b.readFeatures(_1a);var _1d=[];for(var i=0;i<_1c.length;i++){var _1e=_1c[i].type_;var _1f=_1c[i].flatCoordinates_;var _20=_1c[i].properties_;var geo=_Pixel2ToXian80(_1e,_1f,col,row,_17);_1d.push(_getFeature(geo,_20,_1e));}_18(_getFeatureCollection(_1d));};xhr.send();});}});});