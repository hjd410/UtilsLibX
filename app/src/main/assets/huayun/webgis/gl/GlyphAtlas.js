//>>built
define("com/huayun/webgis/gl/GlyphAtlas",["./potpack","../utils/image","../utils/Constant","./dataTransfer"],function(_1,_2,_3,_4){function _5(_6){var _7={};var _8=[];for(var _9 in _6){var _a=_6[_9];var _b=_7[_9]={};for(var id in _a){var _c=_a[+id];if(!_c||_c.bitmap.width===0||_c.bitmap.height===0){continue;}var _d={x:0,y:0,w:_c.bitmap.width+2*_3.layout.padding,h:_c.bitmap.height+2*_3.layout.padding};_8.push(_d);_b[id]={rect:_d,metrics:_c.metrics};}}var _e=_1(_8);var w=_e.w;var h=_e.h;var _f=new _2.AlphaImage({width:w||1,height:h||1});for(var _10 in _6){var _11=_6[_10];for(var _12 in _11){var _13=_11[+_12];if(!_13||_13.bitmap.width===0||_13.bitmap.height===0){continue;}var _14=_7[_10][_12].rect;_2.AlphaImage.copy(_13.bitmap,_f,{x:0,y:0},{x:_14.x+_3.layout.padding,y:_14.y+_3.layout.padding},_13.bitmap);}}this.image=_f;this.positions=_7;};undefined;_4.register("GlyphAtlas",_5);return _5;});