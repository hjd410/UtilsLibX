//>>built
define("com/huayun/webgis/gl/draw/drawTerrain",["exports","../mode","../../geometry/Point","../Texture","../../utils/utils","../programCache","custom/gl-matrix-min"],function(_1,_2,_3,_4,_5,_6,_7){var _8=function(_9,_a,_b){var _c=Math.random();return {"u_matrix":_9,"u_tileRectangle":[0,0,8192,8192],"u_color":[_c,_c,_c,1],"u_image":0};};var _d=function(_e,_f,_10,_11){var _12=_e.view.context;var gl=_12.gl;var _13=_6.useProgramSimplify(_12,"terrain",{layoutAttributes:[{name:"position3DAndHeight",type:"Float32",components:4,offset:0},{name:"textureCoordAndEncodedNormals",type:"Float32",components:3,offset:16}]});var _14=_2.StencilMode.disabled;var _15=_2.ColorMode.alphaBlended;var _16=_11.length&&_11[0].overscaledZ;for(var i=0,_17=_11;i<_17.length;i+=1){var _18=_17[i];var _19=_e.depthModeForSublayer(_18.overscaledZ-_16,_2.DepthMode.ReadWrite,gl.LESS);var _1a=_f.getTile(_18);var _1b=_18.posMatrix;var _1c=_1a.bucket;var _1d=gl.LINEAR;_12.activeTexture.set(gl.TEXTURE0);_1a.texture.bind(_1d,gl.CLAMP_TO_EDGE,gl.LINEAR_MIPMAP_NEAREST);debugger;var _1e=_8(_1b,_1a.rectangle,_e.view.resolution);_13.draw(_12,gl.TRIANGLES,_19,_14,_15,_2.CullFaceMode.disabled,_1e,"tile",_1c.vertexBuffer,_1c.indexBuffer,_1c.segments);}};return _d;});