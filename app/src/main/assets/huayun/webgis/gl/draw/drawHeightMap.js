//>>built
define("com/huayun/webgis/gl/draw/drawHeightMap",["exports","../mode","../../geometry/Point","../Texture","../../utils/utils","../programCache","../glUtils","custom/gl-matrix-min"],function(_1,_2,_3,_4,_5,_6,_7,_8){var _9=function(_a){return {"u_min_height":_a.minimumHeight,"u_delta_height":_a.maximumHeight-_a.minimumHeight};};var _b=function(_c,_d,_e,_f){var _10=_c.view.context;var gl=_10.gl;var _11=_6.useProgramSimplify(_10,"heightMap",{layoutAttributes:[{name:"a_pos",type:"Float32",components:3,offset:0}]});var _12=_2.StencilMode.disabled;var _13=_2.ColorMode.alphaBlended;var _14=_c.depthModeForSublayer(0,_2.DepthMode.ReadWrite,gl.LESS);var _15=_f.bucket;var fbo=_f.fbo;var _16=_c.view.width,_17=_c.view.height;if(!fbo){fbo=_f.fbo=_7.generateFBO(_10,256,256);}_10.bindFramebuffer.set(fbo.framebuffer);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);_10.viewport.set([0,0,256,256]);var _18=_9(_f);_11.draw(_10,gl.TRIANGLES,_14,_12,_13,_2.CullFaceMode.disabled,_18,"tile",_15.layoutVertexBuffer,_15.indexBuffer,_15.segments);_10.bindFramebuffer.set(null);_10.viewport.set([0,0,_16,_17]);_f.heightTexture=fbo.colorAttachment.get();};return _b;});