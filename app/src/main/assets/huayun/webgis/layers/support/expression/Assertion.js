//>>built
define("com/huayun/webgis/layers/support/expression/Assertion",["../style/styleUtils"],function(e){var h={string:{kind:"string"},number:{kind:"number"},boolean:{kind:"boolean"},object:{kind:"object"}},f=function(a,b){this.type=a;this.args=b};f.parse=function(a,b){if(2>a.length)return b.error("Expected at least one argument.");var c=1,g,d=a[0];if("array"===d){if(2<a.length){d=a[1];if("string"!==typeof d||!(d in h)||"object"===d)return b.error('The item type argument of "array" must be one of string, number, boolean',
1);d=h[d];c++}else d={kind:"value"};if(3<a.length){if(null!==a[2]&&("number"!==typeof a[2]||0>a[2]||a[2]!==Math.floor(a[2])))return b.error('The length argument to "array" must be a positive integer literal',2);g=a[2];c++}g={kind:"array",itemType:d,N:g}}else g=h[d];for(d=[];c<a.length;c++){var e=b.parse(a[c],c,{kind:"value"});if(!e)return null;d.push(e)}return new f(g,d)};f.prototype.evaluate=function(a){for(var b=0;b<this.args.length;b++){var c=this.args[b].evaluate(a);if(!e.checkSubtype(this.type,
e.typeOf(c)))return c;if(b===this.args.length-1)throw Error("Expected value to be of type "+e.toString(this.type)+", but found "+e.toString(e.typeOf(c))+" instead.");}return null};f.prototype.eachChild=function(a){this.args.forEach(a)};f.prototype.possibleOutputs=function(){var a;return(a=[]).concat.apply(a,this.args.map(function(a){return a.possibleOutputs()}))};f.prototype.serialize=function(){var a=this.type,b=[a.kind];if("array"===a.kind){var c=a.itemType;if("string"===c.kind||"number"===c.kind||
"boolean"===c.kind)b.push(c.kind),a=a.N,("number"===typeof a||1<this.args.length)&&b.push(a)}return b.concat(this.args.map(function(a){return a.serialize()}))};return f});