//>>built
define("com/huayun/webgis/layers/support/TileInfo",["dojo/_base/declare","../../geometry/MapPoint","./LOD","../../geometry/Extent"],function(_1,_2,_3,_4){return _1("com.huayun.webgis.layers.support.TileInfo",[],{size:256,dpi:96,format:"PNG8",origin:null,lods:[],fullExtent:null,constructor:function(_5){this.lods=_5.lods;this.origin=_5.origin;this.size=_5.size?_5.size:256;this.dpi=_5.dpi?_5.dpi:96;this.fullExtent=_5.fullExtent;this.lods.forEach(function(_6){if(_6.level===0){this.baseResolution=_6.resolution;}}.bind(this));},toString:function(){return "size: "+this.size+" dpi: "+this.dpi;},getResolution:function(_7){return this.baseResolution/Math.pow(2,_7);},getLevel:function(_8){return Math.log2(this.baseResolution/_8);},findNestZoom:function(_9){var _a=this.lods,_b=_a.length,_c=0;for(var j=_b-1;j>-1;j--){_c=_a[j].resolution/_9;if(_c<1.9&&_c>0.95){return {resolution:_a[j].resolution,level:j};}}return {level:_b-1,resolution:_a[_b-1].resolution};},getColForX:function(x,_d){return (x-this.origin.x)/(_d*this.size);},getRowForY:function(y,_e){return (this.origin.y-y)/(_e*this.size);},getColRange:function(_f){var _10=this.fullExtent.miny,_11=this.fullExtent.maxy;return [Math.floor((this.origin.y-_11)/(_f*this.size)),Math.ceil((this.origin.y-_10)/(_f*this.size))];},getXForCol:function(x,_12){return (_12*this.size)*x+this.origin.x;},getYForRow:function(y,_13){return this.origin.y-(_13*this.size)*y;},getColForSceneX:function(x,_14){return (x-this.origin.x/_14)/this.size;},getRowForSceneY:function(y,_15){return (this.origin.y/_15-y)/this.size;},getSceneXForCol:function(x,_16){return this.size*x+this.origin.x/_16;},getSceneYForRow:function(y,_17){return this.origin.y/_17-this.size*y;},getSceneXForCol2:function(x,_18,r){return (this.size*_18*x+this.origin.x)/r;},getSceneYForRow2:function(y,_19,r){return (this.origin.y-this.size*_19*y)/r;},getGeometry:function(_1a,_1b){var _1c=_1a.canonical;var r=this.getResolution(_1b||_1c.z);var x=this.getXForCol(_1c.x,r),y=this.getYForRow(_1c.y,r);return [x,y];},getSceneXForX:function(x,_1d){return x/this.getResolution(_1d);},getSceneYForY:function(y,_1e){return y/this.getResolution(_1e);},tileXYToRectangle:function(x,y,_1f){var _20=this.getResolution(_1f);var _21=this.getXForCol(x,_20);var _22=this.getXForCol(x+1,_20);var _23=this.getYForRow(y,_20);var _24=this.getYForRow(y+1,_20);return {west:_21,east:_22,north:_23,south:_24};}});});