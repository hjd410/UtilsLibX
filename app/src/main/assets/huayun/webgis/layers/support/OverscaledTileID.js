//>>built
define("com/huayun/webgis/layers/support/OverscaledTileID",["./CanonicalTileID","./funcUtils"],function(_1,_2){var _3=function _3(_4,_5){this.wrap=_4;this.canonical=_5;this.key=_2.calculateKey(_4,_5.z,_5.x,_5.y);};var _6=function _6(_7,_8,z,x,y){this.overscaledZ=_7;this.wrap=_8;this.canonical=new _1(z,+x,+y);this.key=_2.calculateKey(_8,_7,x,y);};_6.prototype.equals=function equals(id){return this.overscaledZ===id.overscaledZ&&this.wrap===id.wrap&&this.canonical.equals(id.canonical);};_6.prototype.scaledTo=function scaledTo(_9){var _a=this.canonical.z-_9;if(_9>this.canonical.z){return new _6(_9,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y);}else{return new _6(_9,this.wrap,_9,this.canonical.x>>_a,this.canonical.y>>_a);}};_6.prototype.isChildOf=function isChildOf(_b){if(_b.wrap!==this.wrap){return false;}var _c=this.canonical.z-_b.canonical.z;return _b.overscaledZ===0||(_b.overscaledZ<this.overscaledZ&&_b.canonical.x===(this.canonical.x>>_c)&&_b.canonical.y===(this.canonical.y>>_c));};_6.prototype.children=function children(_d){if(this.overscaledZ>=_d){return [new _6(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];}var z=this.canonical.z+1;var x=this.canonical.x*2;var y=this.canonical.y*2;return [new _6(z,this.wrap,z,x,y),new _6(z,this.wrap,z,x+1,y),new _6(z,this.wrap,z,x,y+1),new _6(z,this.wrap,z,x+1,y+1)];};_6.prototype.isLessThan=function isLessThan(_e){if(this.wrap<_e.wrap){return true;}if(this.wrap>_e.wrap){return false;}if(this.overscaledZ<_e.overscaledZ){return true;}if(this.overscaledZ>_e.overscaledZ){return false;}if(this.canonical.x<_e.canonical.x){return true;}if(this.canonical.x>_e.canonical.x){return false;}if(this.canonical.y<_e.canonical.y){return true;}return false;};_6.prototype.wrapped=function wrapped(){return new _6(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y);};_6.prototype.unwrapTo=function unwrapTo(_f){return new _6(this.overscaledZ,_f,this.canonical.z,this.canonical.x,this.canonical.y);};_6.prototype.overscaleFactor=function overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z);};_6.prototype.toUnwrapped=function toUnwrapped(){return new _3(this.wrap,this.canonical);};_6.prototype.toString=function toString(){return ((this.overscaledZ)+"/"+(this.canonical.x)+"/"+(this.canonical.y));};_6.prototype.getTilePoint=function getTilePoint(_10){return this.canonical.getTilePoint(new MercatorCoordinate(_10.x-this.wrap,_10.y));};return _6;});