//>>built
define("com/huayun/webgis/layers/support/expression/definitions",["exports"],function(_1){function _2(op,_3,_4){var _5=op!=="=="&&op!=="!=";return (function(){function _6(_7,_8,_9){this.type={kind:"boolean"};this.lhs=_7;this.rhs=_8;this.collator=_9;this.hasUntypedArgument=_7.type.kind==="value"||_8.type.kind==="value";};_6.parse=function parse(_a,_b){if(_a.length!==3&&_a.length!==4){return _b.error("Expected two or three arguments.");}var op=(_a[0]);var _c=_b.parse(_a[1],1,{kind:"value"});if(!_c){return null;}if(!isComparableType(op,_c.type)){return _b.concat(1).error(("\""+op+"\" comparisons are not supported for type '"+(toString(_c.type))+"'."));}var _d=_b.parse(_a[2],2,{kind:"value"});if(!_d){return null;}if(!isComparableType(op,_d.type)){return _b.concat(2).error(("\""+op+"\" comparisons are not supported for type '"+(toString(_d.type))+"'."));}if(_c.type.kind!==_d.type.kind&&_c.type.kind!=="value"&&_d.type.kind!=="value"){return _b.error(("Cannot compare types '"+(toString(_c.type))+"' and '"+(toString(_d.type))+"'."));}if(_5){if(_c.type.kind==="value"&&_d.type.kind!=="value"){_c=new Assertion(_d.type,[_c]);}else{if(_c.type.kind!=="value"&&_d.type.kind==="value"){_d=new Assertion(_c.type,[_d]);}}}var _e=null;if(_a.length===4){if(_c.type.kind!=="string"&&_d.type.kind!=="string"&&_c.type.kind!=="value"&&_d.type.kind!=="value"){return _b.error("Cannot use collator to compare non-string types.");}_e=_b.parse(_a[3],3,CollatorType);if(!_e){return null;}}return new _6(_c,_d,_e);};_6.prototype.evaluate=function evaluate(_f){var lhs=this.lhs.evaluate(_f);var rhs=this.rhs.evaluate(_f);if(_5&&this.hasUntypedArgument){var lt=typeOf(lhs);var rt=typeOf(rhs);if(lt.kind!==rt.kind||!(lt.kind==="string"||lt.kind==="number")){throw new RuntimeError(("Expected arguments for \""+op+"\" to be (string, string) or (number, number), but found ("+(lt.kind)+", "+(rt.kind)+") instead."));}}if(this.collator&&!_5&&this.hasUntypedArgument){var _10=typeOf(lhs);var _11=typeOf(rhs);if(_10.kind!=="string"||_11.kind!=="string"){return _3(_f,lhs,rhs);}}return this.collator?_4(_f,lhs,rhs,this.collator.evaluate(_f)):_3(_f,lhs,rhs);};_6.prototype.eachChild=function eachChild(fn){fn(this.lhs);fn(this.rhs);if(this.collator){fn(this.collator);}};_6.prototype.possibleOutputs=function possibleOutputs(){return [true,false];};_6.prototype.serialize=function serialize(){var _12=[op];this.eachChild(function(_13){_12.push(_13.serialize());});return _12;};return _6;}());};function eq(ctx,a,b){return a===b;};function neq(ctx,a,b){return a!==b;};function lt(ctx,a,b){return a<b;};function gt(ctx,a,b){return a>b;};function _14(ctx,a,b){return a<=b;};function _15(ctx,a,b){return a>=b;};function _16(ctx,a,b,c){return c.compare(a,b)===0;};function _17(ctx,a,b,c){return !_16(ctx,a,b,c);};function _18(ctx,a,b,c){return c.compare(a,b)<0;};function _19(ctx,a,b,c){return c.compare(a,b)>0;};function _1a(ctx,a,b,c){return c.compare(a,b)<=0;};function _1b(ctx,a,b,c){return c.compare(a,b)>=0;};_1.Equals=_2("==",eq,_16);_1.NotEquals=_2("!=",neq,_17);_1.LessThan=_2("<",lt,_18);_1.GreaterThan=_2(">",gt,_19);_1.LessThanOrEqual=_2("<=",_14,_1a);_1.GreaterThanOrEqual=_2(">=",_15,_1b);});