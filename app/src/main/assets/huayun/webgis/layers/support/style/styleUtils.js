//>>built
define("com/huayun/webgis/layers/support/style/styleUtils",["exports","../expression/Formatted","../expression/Var","../../../utils/utils","../../../utils/Color","../../../geometry/Point"],function(_1,_2,_3,_4,_5,_6){var _7=[{kind:"null"},{kind:"number"},{kind:"string"},{kind:"boolean"},{kind:"color"},{kind:"formatted"},{kind:"object"},{kind:"array",itemType:{kind:"value"},N:undefined}];function _8(_9){return !!_9.expression&&_9.expression.interpolated;};_1.supportsInterpolation=_8;function _a(_b,_c){var _d=_b.length-1;var _e=0;var _f=_d;var _10=0;var _11,_12;while(_e<=_f){_10=Math.floor((_e+_f)/2);_11=_b[_10];_12=_b[_10+1];if(_11<=_c){if(_10===_d||_c<_12){return _10;}_e=_10+1;}else{if(_11>_c){_f=_10-1;}else{throw new Error("Input is not a number.");}}}return 0;};_1.findStopLessThanOrEqualTo=_a;function _13(_14,_15,_16,_17){var _18=_17-_16;var _19=_14-_16;if(_18===0){return 0;}else{if(_15===1){return _19/_18;}else{return (Math.pow(_15,_19)-1)/(Math.pow(_15,_18)-1);}}};_1.interpolationFactor=_13;function _1a(_1b,to,t){return new _5(_4.number(_1b.r,to.r,t),_4.number(_1b.g,to.g,t),_4.number(_1b.b,to.b,t),_4.number(_1b.a,to.a,t));};function _1c(_1d,to,t){return _1d.map(function(d,i){return _4.number(d,to[i],t);});};_1.interpolate=Object.freeze({number:_4.number,color:_1a,array:_1c});function _1e(_1f){if(_1f.kind==="array"){var _20=_1e(_1f.itemType);return typeof _1f.N==="number"?("array<"+_20+", "+(_1f.N)+">"):_1f.itemType.kind==="value"?"array":("array<"+_20+">");}else{return _1f.kind;}};_1.toString=_1e;function _21(_22,t){if(t.kind==="error"){return null;}else{if(_22.kind==="array"){if(t.kind==="array"&&((t.N===0&&t.itemType.kind==="value")||!_21(_22.itemType,t.itemType))&&(typeof _22.N!=="number"||_22.N===t.N)){return null;}}else{if(_22.kind===t.kind){return null;}else{if(_22.kind==="value"){for(var i=0,_23=_7;i<_23.length;i+=1){var _24=_23[i];if(!_21(_24,t)){return null;}}}}}}return ("Expected "+(_1e(_22))+" but found "+(_1e(t))+" instead.");};_1.checkSubtype=_21;function _25(_26){return _26["property-type"]==="data-driven"||_26["property-type"]==="cross-faded-data-driven";};_1.supportsPropertyExpression=_25;function _27(_28){return !!_28.expression&&_28.expression.parameters.indexOf("zoom")>-1;};_1.supportsZoomExpression=_27;function _29(_2a,_2b,_2c,_2d,_2e){if(!_2b[0]&&!_2b[1]){return _2a;}var pt=_6.convert(_2b)._mult(_2e);if(_2c==="viewport"){pt._rotate(-_2d);}var _2f=[];for(var i=0;i<_2a.length;i++){var _30=_2a[i];_2f.push(_30.sub(pt));}return _2f;};_1.translate=_29;function _31(_32,_33,_34){var _35=_33.paint.get(_32).value;if(_35.kind==="constant"){return _35.value;}else{var _36=_34.programConfigurations.get(_33.id).binders;return _36[_32].maxValue;}};_1.getMaximumPaintValue=_31;function _37(_38){if(_38===null){return {kind:"null"};}else{if(typeof _38==="string"){return {kind:"string"};}else{if(typeof _38==="boolean"){return {kind:"boolean"};}else{if(typeof _38==="number"){return {kind:"number"};}else{if(Array.isArray(_38)){var _39=_38.length;var _3a;for(var i=0,_3b=_38;i<_3b.length;i+=1){var _3c=_3b[i];var t=_37(_3c);if(!_3a){_3a=t;}else{if(_3a===t){continue;}else{_3a={kind:"value"};break;}}}return {kind:"array",itemType:_3a||{kind:"value"},N:_39,};}else{return {kind:"object"};}}}}}};_1.typeOf=_37;function _3d(_3e){if(_3e===null){return true;}else{if(typeof _3e==="string"){return true;}else{if(typeof _3e==="boolean"){return true;}else{if(typeof _3e==="number"){return true;}else{if(Array.isArray(_3e)){for(var i=0,_3f=_3e;i<_3f.length;i+=1){var _40=_3f[i];if(!_3d(_40)){return false;}}return true;}else{if(typeof _3e==="object"){for(var key in _3e){if(!_3d(_3e[key])){return false;}}return true;}else{return false;}}}}}}};_1.isValue=_3d;_1.toString$1=function(_41){var _42=typeof _41;if(_41===null){return "";}else{if(_42==="string"||_42==="number"||_42==="boolean"){return String(_41);}else{if(_41 instanceof _5||_41 instanceof _2){return _41.toString();}else{return JSON.stringify(_41);}}}};function _43(_44,N){return {kind:"array",itemType:_44,N:N};};_1.array=_43;function _45(_46){return {result:"success",value:_46};};function _47(_48){return {result:"error",value:_48};};_1.success=_45;_1.error=_47;_1.emitValidationErrors=function(_49,_4a){var _4b=false;if(_4a&&_4a.length){for(var i=0,_4c=_4a;i<_4c.length;i+=1){var _4d=_4c[i];_4b=true;}}return _4b;};_1.translateDistance=function(_4e){return Math.sqrt(_4e[0]*_4e[0]+_4e[1]*_4e[1]);};});