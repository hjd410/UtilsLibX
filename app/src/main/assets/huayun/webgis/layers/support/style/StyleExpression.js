//>>built
define("com/huayun/webgis/layers/support/style/StyleExpression",["./EvaluationContext","../../../utils/Color","../../../utils/utils","../../../gl/dataTransfer"],function(g,d,h,k){var b=function(e,a){this.expression=e;this._warningHistory={};this._evaluator=new g;this._defaultValue=a?"color"===a.type&&h.isFunction(a.default)?new d(0,0,0,0):"color"===a.type?d.parse(a.default)||null:void 0===a.default?null:a.default:null;this._enumValues=a&&"enum"===a.type?a.values:null};b.prototype.evaluateWithoutErrorHandling=
function(e,a,b){this._evaluator.globals=e;this._evaluator.feature=a;this._evaluator.featureState=b;return this.expression.evaluate(this._evaluator)};b.prototype.evaluate=function(b,a,d){this._evaluator.globals=b;this._evaluator.feature=a||null;this._evaluator.featureState=d||null;try{var c=this.expression.evaluate(this._evaluator);if(null===c||void 0===c)return this._defaultValue;if(this._enumValues&&!(c in this._enumValues))throw Error("Expected value to be one of "+Object.keys(this._enumValues).map(function(a){return JSON.stringify(a)}).join(", ")+
", but found "+JSON.stringify(c)+" instead.");return c}catch(f){return this._warningHistory[f.message]||(this._warningHistory[f.message]=!0,"undefined"!==typeof console&&console.warn(f.message)),this._defaultValue}};k.register("StyleExpression",b,{omit:["_evaluator"]});return b});