//>>built
define("com/huayun/webgis/layers/support/StyleProperty",["require","exports","./GeometryUtils"],function(m,n,k){return function(){function e(a,c,b){this.isDataDriven=!1;switch(c.type){case "number":a=!0;break;case "color":a=!0;b=e._parseColor(b);break;case "array":a="number"===c.value;break;default:a=!1}null==b&&(b=c.default);a&&"interval"===b.type&&(a=!1);var f=b&&b.stops&&0<b.stops.length;if(f)for(var d=0,g=b.stops;d<g.length;d++){var l=g[d];l[1]=this._validate(l[1],c)}if(this.isDataDriven=b?!!b.property:
!1)if(void 0!==b.default&&(b.default=this._validate(b.default,c)),f)switch(b.type){case "identity":this.getValue=this._buildIdentity(b,c);break;case "categorical":this.getValue=this._buildCategorical(b,c);break;default:this.getValue=a?this._buildInterpolate(b,c):this._buildInterval(b,c)}else this.getValue=this._buildIdentity(b,c);else f?this.getValue=a?this._buildZoomInterpolate(b):this._buildZoomInterval(b):(b=this._validate(b,c),this.getValue=this._buildSimple(b))}e.prototype._validate=function(a,
c){if("number"===c.type){if(a<c.minimum)return c.minimum;if(a>c.maximum)return c.maximum}return a};e.prototype._buildSimple=function(a){return function(){return a}};e.prototype._buildIdentity=function(a,c){var b=this;return function(f,d){var g;d&&(g=d.values[a.property],"color"===c.type&&(g=e._parseColor(g)));void 0===g&&(g=a.default);return void 0!==g?b._validate(g,c):c.default}};e.prototype._buildCategorical=function(a,c){var b=this;return function(f,d){var g;d&&(g=d.values[a.property]);g=b._categorical(g,
a.stops);return void 0!==g?g:void 0!==a.default?a.default:c.default}};e.prototype._buildInterval=function(a,c){var b=this;return function(f,d){var g;d&&(g=d.values[a.property]);return"number"===typeof g?b._interval(g,a.stops):void 0!==a.default?a.default:c.default}};e.prototype._buildInterpolate=function(a,c){var b=this;return function(f,d){var g;d&&(g=d.values[a.property]);return"number"===typeof g?b._interpolate(g,a.stops,a.base||1):void 0!==a.default?a.default:c.default}};e.prototype._buildZoomInterpolate=
function(a){var c=this;return function(b){return c._interpolate(b,a.stops,a.base||1)}};e.prototype._buildZoomInterval=function(a){var c=this;return function(b){return c._interval(b,a.stops)}};e.prototype._categorical=function(a,c){for(var b=c.length,f=0;f<b;f++)if(c[f][0]===a)return c[f][1]};e.prototype._interval=function(a,c){for(var b=c.length,f=0,d=0;d<b;d++)if(c[d][0]<=a)f=d;else break;return c[f][1]};e.prototype._interpolate=function(a,c,b){for(var f,d,g=c.length,e=0;e<g;e++){var h=c[e];if(h[0]<=
a)f=h;else{d=h;break}}if(f&&d){e=d[0]-f[0];a-=f[0];b=1===b?a/e:(Math.pow(b,a)-1)/(Math.pow(b,e)-1);if(Array.isArray(f[1])){f=f[1];d=d[1];a=[];for(e=0;e<f.length;e++)a.push(k.interpolate(f[e],d[e],b));return a}return k.interpolate(f[1],d[1],b)}if(f)return f[1];if(d)return d[1]};e._isEmpty=function(a){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0};e._parseColor=function(a){return a};return e}()});