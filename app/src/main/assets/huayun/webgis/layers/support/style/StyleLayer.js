//>>built
define("com/huayun/webgis/layers/support/style/StyleLayer",["./Layout","./Transitionable","./PossiblyEvaluatedPropertyValue","./styleUtils","../../../utils/utils"],function(_1,_2,_3,_4,_5){var _6="-transition";function _7(_8,_9,_a){var _b={};for(var _c in _8){if(_9.call(_a||this,_8[_c],_c,_8)){_b[_c]=_8[_c];}}return _b;};var _d=function(_e,_f){this.id=_e.id;this.type=_e.type;this._featureFilter=function(){return true;};if(_e.type==="custom"){return;}this.metadata=_e.metadata;this.minzoom=_e.minzoom;this.maxzoom=_e.maxzoom;this.source=_e.source;if(_e.type!=="background"){this.sourceLayer=_e["source-layer"];this.filter=_e.filter;}if(_f.layout){this._unevaluatedLayout=new _1(_f.layout);}if(_f.paint){this._transitionablePaint=new _2(_f.paint);for(var _10 in _e.paint){this.setPaintProperty(_10,_e.paint[_10],{validate:false});}for(var _11 in _e.layout){this.setLayoutProperty(_11,_e.layout[_11],{validate:false});}this._transitioningPaint=this._transitionablePaint.untransitioned();}};_d.prototype.getPaintProperty=function(_12){if(_5.endsWith(_12,_6)){return this._transitionablePaint.getTransition(_12.slice(0,-_6.length));}else{return this._transitionablePaint.getValue(_12);}};_d.prototype.setPaintProperty=function(_13,_14,_15){if(_15===void 0){_15={};}if(_5.endsWith(_13,_6)){this._transitionablePaint.setTransition(_13.slice(0,-_6.length),_14||undefined);return false;}else{var _16=this._transitionablePaint._values[_13];var _17=_16.property.specification["property-type"]==="cross-faded-data-driven";var _18=_16.value.isDataDriven();this._transitionablePaint.setValue(_13,_14);this._handleSpecialPaintPropertyUpdate(_13);var _19=this._transitionablePaint._values[_13].value.isDataDriven();return _19||_18||_17;}};_d.prototype._handleSpecialPaintPropertyUpdate=function(_1a){};_d.prototype.getLayoutProperty=function(_1b){if(_1b==="visibility"){return this.visibility;}return this._unevaluatedLayout.getValue(_1b);};_d.prototype.setLayoutProperty=function(_1c,_1d,_1e){if(_1e===void 0){_1e={};}if(_1c==="visibility"){this.visibility=_1d;return;}this._unevaluatedLayout.setValue(_1c,_1d);};_d.prototype.getCrossfadeParameters=function getCrossfadeParameters(){return this._crossfadeParameters;};_d.prototype.isHidden=function(_1f){if(this.minzoom&&_1f<this.minzoom){return true;}if(this.maxzoom&&_1f>=this.maxzoom){return true;}return this.visibility==="none";};_d.prototype.updateTransitions=function(_20){this._transitioningPaint=this._transitionablePaint.transitioned(_20,this._transitioningPaint);};_d.prototype.hasTransition=function hasTransition(){return this._transitioningPaint.hasTransition();};_d.prototype.recalculate=function recalculate(_21){if(_21.getCrossfadeParameters){this._crossfadeParameters=_21.getCrossfadeParameters();}if(this._unevaluatedLayout){this.layout=this._unevaluatedLayout.possiblyEvaluate(_21);}this.paint=this._transitioningPaint.possiblyEvaluate(_21);};_d.prototype.serialize=function serialize(){var _22={"id":this.id,"type":this.type,"source":this.source,"source-layer":this.sourceLayer,"metadata":this.metadata,"minzoom":this.minzoom,"maxzoom":this.maxzoom,"filter":this.filter,"layout":this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),"paint":this._transitionablePaint&&this._transitionablePaint.serialize()};if(this.visibility){_22.layout=_22.layout||{};_22.layout.visibility=this.visibility;}return _7(_22,function(_23,key){return _23!==undefined&&!(key==="layout"&&!Object.keys(_23).length)&&!(key==="paint"&&!Object.keys(_23).length);});};_d.prototype._validate=function(_24,key,_25,_26,_27){};_d.prototype.is3D=function(){return false;};_d.prototype.isTileClipped=function(){return false;};_d.prototype.hasOffscreenPass=function(){return false;};_d.prototype.resize=function(){};_d.prototype.isStateDependent=function(){for(var _28 in this.paint._values){var _29=this.paint.get(_28);if(!(_29 instanceof _3)||!_4.supportsPropertyExpression(_29.property.specification)){continue;}if((_29.value.kind==="source"||_29.value.kind==="composite")&&_29.value.isStateDependent){return true;}}return false;};return _d;});