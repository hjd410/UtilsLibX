//>>built
define("com/huayun/webgis/utils/loadGlyphRange",["dojo/request","../data/Pbf","./Constant","./image"],function(g,h,f,k){function l(a,b,c){1===a?b.id=c.readVarint():2===a?b.bitmap=c.readBytes():3===a?b.width=c.readVarint():4===a?b.height=c.readVarint():5===a?b.left=c.readSVarint():6===a?b.top=c.readSVarint():7===a&&(b.advance=c.readVarint())}function m(a,b,c){if(3===a){a=c.readMessage(l,{});c=a.width;var e=a.height,d=a.left,n=a.top,p=a.advance;b.push({id:a.id,bitmap:new k.AlphaImage({width:c+2*f.layout.border,
height:e+2*f.layout.border},a.bitmap),metrics:{width:c,height:e,left:d,top:n,advance:p}})}}function q(a,b,c){1===a&&c.readMessage(m,b)}return function(a,b,c,e){b*=256;var d=b+255;g(c.replace("{fontstack}",a).replace("{range}",b+"-"+d),{handleAs:"arraybuffer"}).then(function(a){var c={},b=0;for(a=(new h(a)).readFields(q,[]);b<a.length;b+=1){var d=a[b];c[d.id]=d}e(null,c)}).catch(function(a){e(a)})}});