//>>built
define("com/huayun/webgis/utils/getAnchors",["exports","./utils","../geometry/Anchor"],function(_1,_2,_3){function _4(_5,_6,_7){return _5?3/5*_6*_7:0;};function _8(_9,_a){return Math.max(_9?_9.right-_9.left:0,_a?_a.right-_a.left:0);};function _b(_c){var _d=0;for(var k=0;k<_c.length-1;k++){_d+=_c[k].dist(_c[k+1]);}return _d;};function _e(_f,_10,_11,_12,_13){if(_10.segment===undefined){return true;}var p=_10;var _14=_10.segment+1;var _15=0;while(_15>-_11/2){_14--;if(_14<0){return false;}_15-=_f[_14].dist(p);p=_f[_14];}_15+=_f[_14].dist(_f[_14+1]);_14++;var _16=[];var _17=0;while(_15<_11/2){var _18=_f[_14-1];var _19=_f[_14];var _1a=_f[_14+1];if(!_1a){return false;}var _1b=_18.angleTo(_19)-_19.angleTo(_1a);_1b=Math.abs(((_1b+3*Math.PI)%(Math.PI*2))-Math.PI);_16.push({distance:_15,angleDelta:_1b});_17+=_1b;while(_15-_16[0].distance>_12){_17-=_16.shift().angleDelta;}if(_17>_13){return false;}_14++;_15+=_19.dist(_1a);}return true;};function _1c(_1d,_1e,_1f,_20,_21,_22,_23,_24,_25){var _26=_22/2;var _27=_b(_1d);var _28=0,_29=_1e-_1f;var _2a=[];for(var i=0;i<_1d.length-1;i++){var a=_1d[i],b=_1d[i+1];var _2b=a.dist(b),_2c=b.angleTo(a);while(_29+_1f<_28+_2b){_29+=_1f;var t=(_29-_28)/_2b,x=_2.number(a.x,b.x,t),y=_2.number(a.y,b.y,t);if(x>=0&&x<_25&&y>=0&&y<_25&&_29-_26>=0&&_29+_26<=_27){var _2d=new _3(x,y,_2c,i);_2d._round();if(!_20||_e(_1d,_2d,_22,_20,_21)){_2a.push(_2d);}}}_28+=_2b;}if(!_24&&!_2a.length&&!_23){_2a=_1c(_1d,_28/2,_1f,_20,_21,_22,_23,true,_25);}return _2a;};function _2e(_2f,_30,_31,_32,_33,_34,_35,_36,_37){var _38=_4(_32,_34,_35);var _39=_8(_32,_33);var _3a=_39*_35;var _3b=_2f[0].x===0||_2f[0].x===_37||_2f[0].y===0||_2f[0].y===_37;if(_30-_3a<_30/4){_30=_3a+_30/4;}var _3c=_34*2;var _3d=!_3b?((_39/2+_3c)*_35*_36)%_30:(_30/2*_36)%_30;return _1c(_2f,_3d,_30,_38,_31,_3a,_3b,false,_37);};function _3e(_3f,_40,_41,_42,_43,_44){var _45=_4(_41,_43,_44);var _46=_8(_41,_42)*_44;var _47=0;var _48=_b(_3f)/2;for(var i=0;i<_3f.length-1;i++){var a=_3f[i],b=_3f[i+1];var _49=a.dist(b);if(_47+_49>_48){var t=(_48-_47)/_49,x=_2.number(a.x,b.x,t),y=_2.number(a.y,b.y,t);var _4a=new _3(x,y,b.angleTo(a),i);_4a._round();if(!_45||_e(_3f,_4a,_46,_45,_40)){return _4a;}else{return;}}_47+=_49;}};_1.getAnchors=_2e;_1.getCenterAnchor=_3e;});