//>>built
define("com/huayun/webgis/utils/image",["exports"],function(_1){function _2(_3,_4,_5,_6){var _7=_4.width;var _8=_4.height;if(!_6){_6=new Uint8Array(_7*_8*_5);}else{if(_6 instanceof Uint8ClampedArray){_6=new Uint8Array(_6.buffer);}else{if(_6.length!==_7*_8*_5){throw new RangeError("mismatched image size");}}}_3.width=_7;_3.height=_8;_3.data=_6;return _3;};function _9(_a,_b,_c){var _d=_b.width;var _e=_b.height;if(_d===_a.width&&_e===_a.height){return;}var _f=_2({},{width:_d,height:_e},_c);_10(_a,_f,{x:0,y:0},{x:0,y:0},{width:Math.min(_a.width,_d),height:Math.min(_a.height,_e)},_c);_a.width=_d;_a.height=_e;_a.data=_f.data;};function _10(_11,_12,_13,_14,_15,_16){if(_15.width===0||_15.height===0){return _12;}if(_15.width>_11.width||_15.height>_11.height||_13.x>_11.width-_15.width||_13.y>_11.height-_15.height){throw new RangeError("out of range source coordinates for image copy");}if(_15.width>_12.width||_15.height>_12.height||_14.x>_12.width-_15.width||_14.y>_12.height-_15.height){throw new RangeError("out of range destination coordinates for image copy");}var _17=_11.data;var _18=_12.data;for(var y=0;y<_15.height;y++){var _19=((_13.y+y)*_11.width+_13.x)*_16;var _1a=((_14.y+y)*_12.width+_14.x)*_16;for(var i=0;i<_15.width*_16;i++){_18[_1a+i]=_17[_19+i];}}return _12;};var _1b=function _1b(_1c,_1d){_2(this,_1c,1,_1d);};_1b.prototype.resize=function resize(_1e){_9(this,_1e,1);};_1b.prototype.clone=function clone(){return new _1b({width:this.width,height:this.height},new Uint8Array(this.data));};_1b.copy=function copy(_1f,_20,_21,_22,_23){_10(_1f,_20,_21,_22,_23,1);};_1.AlphaImage=_1b;var _24=function _24(_25,_26){_2(this,_25,4,_26);};_24.prototype.resize=function resize(_27){_9(this,_27,4);};_24.prototype.replace=function replace(_28,_29){if(_29){this.data.set(_28);}else{if(_28 instanceof Uint8ClampedArray){this.data=new Uint8Array(_28.buffer);}else{this.data=_28;}}};_24.prototype.clone=function clone(){return new _24({width:this.width,height:this.height},new Uint8Array(this.data));};_24.copy=function copy(_2a,_2b,_2c,_2d,_2e){_10(_2a,_2b,_2c,_2d,_2e,4);};_1.RGBAImage=_24;function _2f(_30,_31){var _32=new Uint8Array(256*4);var _33={};for(var i=0,j=0;i<256;i++,j+=4){_33[_31]=i/255;var _34=_30.evaluate(_33);_32[j+0]=Math.floor(_34.r*255/_34.a);_32[j+1]=Math.floor(_34.g*255/_34.a);_32[j+2]=Math.floor(_34.b*255/_34.a);_32[j+3]=Math.floor(_34.a*255);}return new _24({width:256,height:1},_32);};_1.renderColorRamp=_2f;});