//>>built
define("com/huayun/webgis/geometry/intersection_tests",["exports","../utils/utils","./Point"],function(_1,_2,_3){function _4(_5){var _6=Infinity;var _7=Infinity;var _8=-Infinity;var _9=-Infinity;for(var i=0,_a=_5;i<_a.length;i+=1){var p=_a[i];_6=Math.min(_6,p.x);_7=Math.min(_7,p.y);_8=Math.max(_8,p.x);_9=Math.max(_9,p.y);}return {minX:_6,minY:_7,maxX:_8,maxY:_9};};function _b(e1,e2,_c){var tl=_c[0];var br=_c[2];if(((e1.x<tl.x)&&(e2.x<tl.x))||((e1.x>br.x)&&(e2.x>br.x))||((e1.y<tl.y)&&(e2.y<tl.y))||((e1.y>br.y)&&(e2.y>br.y))){return false;}var _d=_2.isCounterClockwise(e1,e2,_c[0]);return _d!==_2.isCounterClockwise(e1,e2,_c[1])||_d!==_2.isCounterClockwise(e1,e2,_c[2])||_d!==_2.isCounterClockwise(e1,e2,_c[3]);};function _e(a0,a1,b0,b1){return _2.isCounterClockwise(a0,b0,b1)!==_2.isCounterClockwise(a1,b0,b1)&&_2.isCounterClockwise(a0,a1,b0)!==_2.isCounterClockwise(a0,a1,b1);};function _f(p,_10,_11){var _12=_11*_11;if(_10.length===1){return p.distSqr(_10[0])<_12;}for(var i=1;i<_10.length;i++){var v=_10[i-1],w=_10[i];if(_13(p,v,w)<_12){return true;}}return false;};function _14(_15,_16,_17){if(_15.length>1){if(_18(_15,_16)){return true;}for(var j=0;j<_16.length;j++){if(_f(_16[j],_15,_17)){return true;}}}for(var k=0;k<_15.length;k++){if(_f(_15[k],_16,_17)){return true;}}return false;};function _19(_1a,_1b,_1c){for(var i=0;i<_1b.length;i++){var _1d=_1b[i];if(_1a.length>=3){for(var k=0;k<_1d.length;k++){if(_1e(_1a,_1d[k])){return true;}}}if(_14(_1a,_1d,_1c)){return true;}}return false;};function _1e(_1f,p){var c=false;for(var i=0,j=_1f.length-1;i<_1f.length;j=i++){var p1=_1f[i];var p2=_1f[j];if(((p1.y>p.y)!==(p2.y>p.y))&&(p.x<(p2.x-p1.x)*(p.y-p1.y)/(p2.y-p1.y)+p1.x)){c=!c;}}return c;};function _20(_21,_22,_23,_24,_25){for(var i$1=0,_26=_21;i$1<_26.length;i$1+=1){var p=_26[i$1];if(_22<=p.x&&_23<=p.y&&_24>=p.x&&_25>=p.y){return true;}}var _27=[new _3(_22,_23),new _3(_22,_25),new _3(_24,_25),new _3(_24,_23)];if(_21.length>2){for(var i$2=0,_28=_27;i$2<_28.length;i$2+=1){var _29=_28[i$2];if(_1e(_21,_29)){return true;}}}for(var i=0;i<_21.length-1;i++){var p1=_21[i];var p2=_21[i+1];if(_b(p1,p2,_27)){return true;}}return false;};function _13(p,v,w){var l2=v.distSqr(w);if(l2===0){return p.distSqr(v);}var t=((p.x-v.x)*(w.x-v.x)+(p.y-v.y)*(w.y-v.y))/l2;if(t<0){return p.distSqr(v);}if(t>1){return p.distSqr(w);}return p.distSqr(w.sub(v)._mult(t)._add(v));};function _2a(_2b,p){var c=false,_2c,p1,p2;for(var k=0;k<_2b.length;k++){_2c=_2b[k];for(var i=0,j=_2c.length-1;i<_2c.length;j=i++){p1=_2c[i];p2=_2c[j];if(((p1.y>p.y)!==(p2.y>p.y))&&(p.x<(p2.x-p1.x)*(p.y-p1.y)/(p2.y-p1.y)+p1.x)){c=!c;}}}return c;};function _18(_2d,_2e){if(_2d.length===0||_2e.length===0){return false;}for(var i=0;i<_2d.length-1;i++){var a0=_2d[i];var a1=_2d[i+1];for(var j=0;j<_2e.length-1;j++){var b0=_2e[j];var b1=_2e[j+1];if(_e(a0,a1,b0,b1)){return true;}}}return false;};function _2f(_30,_31){if(_30.length===1){return _2a(_31,_30[0]);}for(var m=0;m<_31.length;m++){var _32=_31[m];for(var n=0;n<_32.length;n++){if(_1e(_30,_32[n])){return true;}}}for(var i=0;i<_30.length;i++){if(_2a(_31,_30[i])){return true;}}for(var k=0;k<_31.length;k++){if(_18(_30,_31[k])){return true;}}return false;};_1.getBounds=_4;_1.edgeIntersectsBox=_b;_1.polygonContainsPoint=_1e;_1.polygonIntersectsBox=_20;_1.distToSegmentSquared=_13;_1.polygonIntersectsMultiPolygon=_2f;_1.polygonIntersectsBufferedMultiLine=_19;});