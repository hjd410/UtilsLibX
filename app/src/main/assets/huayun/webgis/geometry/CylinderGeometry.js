//>>built
define("com/huayun/webgis/geometry/CylinderGeometry",["./Point","../data/ArrayType","../gl/SegmentVector"],function(g,l,p){function f(b){this.position=b.position||new g(0,0,0);this.topRadius=b.topRadius||b.radius||1;this.bottomRadius=b.bottomRadius||b.radius||1;this.length=b.length||1;this.slices=b.slices||30}f.createGeometry=function(b){for(var f=b.length,c=b.slices,g=2*Math.PI/c,m=b.bottomRadius,n=b.topRadius,d,h,k=new l.StructArrayLayout3f12,e=new l.StructArrayLayout3ui6,a=0;a<b.slices;a++)d=d=
a*g,h=Math.cos(d),d=Math.sin(d),k.emplaceBack(m*h,m*d,0),k.emplaceBack(n*h,n*d,f);for(a=1;a<c-1;a++)e.emplaceBack(0,2*a,2*(a+1));for(a=0;a<c;a++)a===c-1?(e.emplaceBack(2*a,0,1),e.emplaceBack(2*a,1,2*a+1)):(e.emplaceBack(2*a,2*(a+1),2*(a+1)+1),e.emplaceBack(2*a,2*(a+1)+1,2*a+1));for(a=1;a<c-1;a++)e.emplaceBack(1,2*a+1,2*(a+1)+1);b.bucket={layoutVertex:k,index:e,segments:p.simpleSegment(0,0,2*c,2*c+2*(c-2))};b.uploaded=!1};f.prototype.upload=function(b){this.uploaded||(this.uploaded=!0,this.bucket.layoutVertexBuffer=
b.createVertexBuffer(this.bucket.layoutVertex,[{name:"a_pos",type:"Float32",components:3,offset:0}]),this.bucket.indexBuffer=b.createIndexBuffer(this.bucket.index))};return f});