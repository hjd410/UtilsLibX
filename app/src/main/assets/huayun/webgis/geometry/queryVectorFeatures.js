//>>built
define("com/huayun/webgis/geometry/queryVectorFeatures",["exports","../utils/utils"],function(_1,_2){function _3(_4){var _5={};var _6={};for(var _7=0,_8=_4;_7<_8.length;_7+=1){var _9=_8[_7];var _a=_9.queryResults;var _b=_9.wrappedTileID;var _c=_6[_b]=_6[_b]||{};for(var _d in _a){var _e=_a[_d];var _f=_c[_d]=_c[_d]||{};var _10=_5[_d]=_5[_d]||[];for(var i=0,_11=_e;i<_11.length;i+=1){var _12=_11[i];if(!_f[_12.featureIndex]){_f[_12.featureIndex]=true;_10.push(_12);}}}}return _5;};function _13(_14,_15,_16,_17,_18,_19,_1a,_1b){var _1c=_18.maxPitchScaleFactor();var _1d=_14.tilesIn(_16,_1c,_19,_1a,_1b);var _1e=[];for(var i=0,_1f=_1d;i<_1f.length;i+=1){var _20=_1f[i];_1e.push({wrappedTileID:_20.tileID.wrapped().key,queryResults:_20.tile.queryRenderedFeatures(_15,_14._state,_20.queryGeometry,_20.cameraQueryGeometry,_20.scale,_17,_18,_1c,_2.getPixelPosMatrix(_14.transform,_20.tileID))});}var _21=_3(_1e);return _21;};_1.queryRenderedFeatures=_13;});