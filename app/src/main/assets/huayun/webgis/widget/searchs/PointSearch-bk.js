//>>built
require({cache:{"url:com/huayun/webgis/templates/searchs/pointSearch.html":'\x3cdiv class\x3d"${baseClass}" style\x3d"pointer-events: all;"\x3e\r\n    \x3cdiv id\x3d"showListP" class\x3d"listView" \x3e\r\n        \x3cspan class\x3d"devTip"\x3e\u8bbe\u5907\u5217\u8868\x3c/span\x3e\r\n        \x3cdiv class\x3d"first"\x3e\r\n            \x3cul id\x3d"devListP" class\x3d"devView" data-dojo-attach-event\x3d"onclick:isMessage"\x3e\x3c/ul\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"devMoreInfoP" class\x3d"infoView"\x3e\r\n        \x3cspan class\x3d"infoTip"\x3e\u8bbe\u5907\u8be6\u60c5\u5217\u8868\x3c/span\x3e\r\n        \x3cdiv class\x3d"end"\x3e\r\n            \x3ctable id\x3d"moreInfoListP" class\x3d"infoTableView"\x3e\x3c/table\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton id\x3d"closeShowP" class\x3d"closeShow" data-dojo-attach-event\x3d"onclick:closeMoreInfo"\x3e\u5173\u95ed\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("com/huayun/webgis/widget/searchs/PointSearch-bk","dojo/_base/declare dojo/topic ../MapModuleX ../../Feature ../../Graphic ../../geometry/Point ../../geometry/Polyline ../../geometry/Multipoint ../../geometry/Polygon ../../symbols/PointSymbol ../../symbols/LineSymbol ../../symbols/PolygonSymbol dojo/text!../../templates/searchs/pointSearch.html".split(" "),function(h,f,k,l,m,g,n,p,q,r,t,u,v){return h("com.huayun.webgis.widget.searchs.PointSearch",[k],{baseClass:"pointSearch",templateString:v,
constructor:function(){this.dataList=this.view=this.map=null},doInit:function(){debugger;this.map=this.get("map");this.view=this.get("view");f.subscribe("showPoint",function(a,b){debugger;this.dataList=a;for(a=0;a<this.dataList.length;a++)this.mscLocation(this.dataList[a])}.bind(this));f.subscribe("closePoint",function(){this.map.findLayerById("drawLayer").clear()}.bind(this))},isMessage:function(a){"message"===a.target.className?this.showMoreInfo(a):this.mscLocation(a)},showMoreInfo:function(a){var b=
dom.byId("devMoreInfo");a=a.target.getAttribute("index");a=this.dataList[a].attributes;b.style.display="block";b.style.zIndex="500";domConstruct.empty(moreInfoList);this.createTable(a)},closeMoreInfo:function(){devMoreInfo.style.display="none"},createTable:function(a){for(key in a)if("SHAPE"!==key&&"SUBGEOREGION"!==key){var b=domConstruct.create("tr",{className:"attrTr"},moreInfoList);domConstruct.create("td",{className:"td1",noWrap:"false",innerHTML:key},b);domConstruct.create("td",{className:"td2",
noWrap:"false",innerHTML:a[key]},b)}},mscLocation:function(a){var b=a.geometry,e=a.geometryType;a=this.map.findLayerById("drawLayer");var c=new r({color:"#FFFF00",radious:10,strokeColor:"#0000FF",strokeWidth:1}),d=new t({color:"#ff2f39",width:3}),f=new u({color:"#0FF",opacity:.5});switch(e){case "esriGeometryPoint":d=new g(b.x,b.y);this.addgraphic(a,d,c);break;case "esriGeometryMultipoint":d=b.points.map(function(a){return new g(a[0],a[1])});d=new p(d);this.addgraphic(a,d,c);break;case "esriGeometryPolyline":c=
b.paths.map(function(a){return a.map(function(a){return new g(a[0],a[1])})});c=new n(c);this.addgraphic(a,c,d);break;default:c=b.rings.map(function(a){return a.map(function(a){return new g(a[0],a[1])})}),c=new q(c),this.addgraphic(a,c,f)}},addgraphic:function(a,b,e){b=new l({attributes:null,geometry:b});e=new m({feature:b,symbol:e});a.addGraphic(e);this.view.threeRender()}})});