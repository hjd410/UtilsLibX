//>>built
require({cache:{"url:com/huayun/webgis/templates/bookMark.html":"<div class=\"${baseClass}\" id=\"bookMark\" style=\"pointer-events: all\">\r\n    <button class=\"book-mark-btn\" id=\"addBtn\" data-dojo-attach-event=\"onclick:viewBook\"></button>\r\n    <div class=\"bookMarkView\" id=\"bookMarkView\" style=\"display: none\">\r\n        <div class=\"book-mark-left\">\r\n            <span class=\"bookNameTip\">添加书签:</span>\r\n            <input class=\"bookMarkName\" type=\"text\" name=\"bookMarkName\" id=\"bookMarkName\" placeholder=\"请输入保存的书签名\"/>\r\n            <button id=\"saveBookMark\" class=\"saveBookBtn\" data-dojo-attach-event=\"onclick:saveBook\">保存书签</button>\r\n        </div>\r\n        <div class=\"book-mark-right\">\r\n            <span class=\"bookNameTip\">书签清单:</span>\r\n            <div id=\"bookMarkShow\">\r\n                <ul class=\"bookMarks\" id=\"bookMarkList\" data-dojo-attach-event=\"onclick:selectBook\"></ul>\r\n            </div>\r\n        </div>\r\n        <button id=\"closeBookBtn\" class=\"closeBookBtn\" data-dojo-attach-event=\"onclick:closeBook\">关闭书签</button>\r\n    </div>\r\n</div>\r\n"}});define("com/huayun/webgis/widget/BookMark",["dojo/_base/declare","dojo/dom-style","dojo/topic","dojo/dom","dojo/dom-construct","./MapModuleX","dojo/text!../templates/bookMark.html"],function(_1,_2,_3,_4,_5,_6,_7){return _1("com.huayun.webgis.widget.BookMark",[_6],{baseClass:"bookMark",templateString:_7,view:null,map:null,markData:[],constructor:function(){this.view=null;this.layerView=null;},doInit:function(){this.map=this.get("map");this.view=this.get("view");},viewBook:function(e){var _8=document.getElementById("bookMarkView");_8.style.display="block";},saveBook:function(){var _9=this.view.viewpoint;var _a=document.getElementById("bookMarkView");var _b=document.getElementById("bookMarkName");var _c=_b.value;this.markData.push({label:_c,pitch:_9.pitch,angle:_9.angle,level:_9.level,center:_9.center});_a.style.display="none";_b.value="";var _d=document.getElementById("bookMarkList");_d.innerHTML="";for(var i=0;i<this.markData.length;i++){var _e=document.createElement("li");_e.innerHTML=this.markData[i].label;_e.className="bookItem";_d.appendChild(_e);}},selectBook:function(e){e=e?e:window.event;var _f=e.target||e.srcElement;var _10=_f.innerHTML;this.selectBookMark(_10);var _11=document.getElementById("bookMarkList");var _12=document.getElementById("bookMarkView");_12.style.display="none";},selectBookMark:function(_13){var _14={},_15={};this.markData.forEach(function(_16){if(_16.label===_13){_15=_16;}});if(_15){_14.pitch=_15.pitch;_14.angle=_15.angle;_14.level=_15.level;_14.center=_15.center;this.view.setView(_14);}},closeBook:function(){var _17=document.getElementById("bookMarkView");_17.style.display="none";},drag:function(){var _18=document.getElementById("bookMarkView");_18.onmousedown=function(e){var e=e||window.event;var _19=e.clientX-_18.offsetLeft;var _1a=e.clientY-_18.offsetTop;document.onmousemove=function(ev){var _1b=ev||window.event;var _1c=_1b.clientX-_19;var top=_1b.clientY-_1a;var _1d=window.innerWidth-_18.offsetWidth+250;var _1e=window.innerHeight-_18.offsetHeight+250;if(_1c<0){_1c=250;}else{if(_1c>_1d){_1c=_1d;}}if(top<0){top=250;}else{if(top>_1e){top=_1e;}}_18.style.left=_1c+"px";_18.style.top=top+"px";};document.onmouseup=function(ev){document.onmousemove=null;document.onmouseup=null;};return false;};}});});