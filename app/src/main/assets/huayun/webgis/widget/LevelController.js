//>>built
require({cache:{"url:com/huayun/webgis/templates/levelController.html":"<div class=\"${baseClass}\" style=\"pointer-events: all;\">\r\n    <div class=\"levelController-box\">\r\n        <div class=\"level-add-btn\" data-dojo-attach-point=\"levelAddBtn\" data-dojo-attach-event=\"onclick:levelAdd\"></div>\r\n        <ul class=\"level-bg\" data-dojo-attach-point=\"levelGradationBox\">\r\n            <li class=\"now-level\" id=\"targetLevel\">${nowLevel}</li>\r\n        </ul>\r\n        <div class=\"level-sub-btn\" data-dojo-attach-point=\"levelSubBtn\" data-dojo-attach-event=\"onclick:levelSub\"></div>\r\n    </div>\r\n</div>\r\n\r\n"}});define("com/huayun/webgis/widget/LevelController",["dojo/_base/declare","dojo/topic","dojo/dom","dojo/dom-construct","dojo/dom-style","dojo/dom-class","./MapModuleX","dojo/text!../templates/levelController.html"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1("com.huayun.webgis.widget.LevelController",[_7],{baseClass:"levelController",_bottom:90,_right:10,templateString:_8,constructor:function(){this.view=null;this.nowLevel=0;this.minLevel=0;this.maxLevel=0;this.scaleHeight=20;_2.subscribe("changeLevel",function(_9){this._levelChange(_9);}.bind(this));},doInit:function(){this.view=this.get("view");if(this.view._load){this.nowLevel=this.view.level;this.maxLevel=this.view.viewpoint.maxLevel;var _a=this.maxLevel*this.scaleHeight;_5.set(this.levelGradationBox,{height:_a+"px",backgroundColor:"white"});this.initScale();this.initLevel();}else{_2.subscribe("tileInfoComplete",function(){this.nowLevel=this.view.level;this.maxLevel=this.view.viewpoint.maxLevel;var _b=this.maxLevel*this.scaleHeight;_5.set(this.levelGradationBox,{height:_b+"px",backgroundColor:"white"});this.initScale();this.initLevel();}.bind(this));}},initScale:function(){for(var i=0;i<this.maxLevel;i++){_4.create("li",{innerHTML:"",className:"level-gradation",style:"height:"+this.scaleHeight+"px",data_level:this.maxLevel-i,click:function(_c){var _d=_c.target.getAttribute("data_level");_d=parseInt(_d);if(_d===this.view.level){return;}this.view.setLevel(_d);this._levelChange({level:_d});}.bind(this)},this.levelGradationBox,"last");}},initLevel:function(){var _e=this.scaleHeight*(this.maxLevel-this.view.level);this.showLevel();_5.set(_3.byId("targetLevel"),"top",_e+"px");},_levelChange:function(_f){if(typeof _f==="undefined"||typeof _f.level==="undefined"){console.error("设置level为无效值,参数形式 e.g. {level:12}");}else{if(this.nowLevel===_f.level){return;}this.nowLevel=_f.level;var _10=typeof _f.diffLevel==="undefined"?(this.maxLevel-this.nowLevel):_f.diffLevel;var _11=this.scaleHeight*_10;this.showLevel();_5.set(_3.byId("targetLevel"),"top",_11+"px");}},changeLevelByLocation:function(_12,_13){this.nowLevel=_12;var _14=this.scaleHeight*(_13);this.showLevel();_5.set(_3.byId("targetLevel"),"top",_14+"px");},showLevel:function(){_3.byId("targetLevel").innerHTML=this.nowLevel;},levelSub:function(){this.view.zoomOut();},levelAdd:function(){this.view.zoomIn();}});});