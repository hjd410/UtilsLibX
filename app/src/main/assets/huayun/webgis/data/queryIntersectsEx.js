//>>built
define("com/huayun/webgis/data/queryIntersectsEx",["exports"],function(_1){function _2(_3,p){var c=false,_4;var _5=Array.isArray(_3)?_3[0].type:_3.type;if(_5==="point"){_4=Array.isArray(_3)?_3[0]:_3;}else{_4=Array.isArray(_3)?_3[0].path[0]:_3.path[0];for(var i=0,j=_4.length-1;i<_4.length;j=i++){var p1=_4[i];var p2=_4[j];p.y=Array.isArray(p)?p[1]:p.y;p.x=Array.isArray(p)?p[0]:p.x;if(((p1.y>p.y)!==(p2.y>p.y))&&(p.x<(p2.x-p1.x)*(p.y-p1.y)/(p2.y-p1.y)+p1.x)){c=!c;}}}return c;};function _6(p1,p2,_7){var _8,_9;Array.isArray(p1)?_8=p1:_9=p1;Array.isArray(p2)?_8=p2:_9=p2;if(!(Array.isArray(p1)||Array.isArray(p2))){_a(p1,p2,_7);}if(_b(_9,_8[0])<_7*_7){return true;}else{return false;}};function _a(p1,p2,_c){if(Array.isArray(p1)||Array.isArray(p2)){_6(p1,p2,_c);}if(_d(p1,p2)<_c*_c){return true;}else{return false;}};function _e(a0,a1,b0,b1){return _f(a0,b0,b1)!==_f(a1,b0,b1)&&_f(a0,a1,b0)!==_f(a0,a1,b1);};function _10(_11,_12){if(_11.length===0||_12.length===0){return false;}for(var i=0;i<_11.length-1;i++){var a0=_11[i];var a1=_11[i+1];for(var j=0;j<_12.length-1;j++){var b0=_12[j];var b1=_12[j+1];if(_e(a0,a1,b0,b1)){return true;}}}return false;};function _13(p,v,w){var l2=(v[0]-w[0])*(v[0]-w[0])+(v[1]-w[1])*(v[1]-w[1]);if(l2===0){return _d(p,v);}var t=((p.x-v[0])*(w[0]-v[0])+(p.y-v[1])*(w[1]-v[1]))/l2;if(t<0){return _d(p,v);}if(t>1){return _d(p,w);}return _d(p,_14(w,v,t));};function _d(p1,p2){var dx=p1.x-p2[0],dy=p1.y-p2[1];return dx*dx+dy*dy;};function _b(p1,p2){var dx=p1.x-p2.x,dy=p1.y-p2.y;return dx*dx+dy*dy;};function _f(a,b,c){return (c[1]-a[1])*(b[0]-a[0])>(b[1]-a[1])*(c[0]-a[0]);};function _14(w,v,t){var m=[];m[0]=(w[0]-v[0])*t+v[0];m[1]=(w[1]-v[1])*t+v[1];return m;};function _15(p,_16,_17){var _18=_17*_17;if(_16.length===1){return _b(_16[0],p)<_18;}for(var i=1;i<_16.length;i++){var v=_16[i-1],w=_16[i];if(_13(p,v,w)<_18){return true;}}return false;};function _19(_1a,_1b,_1c){if(_6(_1a,_1b,_1c)){return true;}if(_2(_1a,_1b)){return true;}if(_15(_1b,_1a,_1c)){return true;}return false;};function _1d(_1e,_1f,_20){if(_1e.length>1){if(_10(_1e,_1f)){return true;}for(var j=0;j<_1f.length;j++){if(_15(_1f[j],_1e,_20)){return true;}}}for(var k=0;k<_1e.length;k++){if(_15(_1e[k],_1f,_20)){return true;}}return false;};function _21(_22,p){var c=false,_23,p1,p2;for(var k=0;k<_22.length;k++){_23=_22[k];for(var i=0,j=_23.length-1;i<_23.length;j=i++){p1=_23[i];p2=_23[j];if(((p1[1]>p.y)!==(p2[1]>p.y))&&(p.x<(p2[0]-p1[0])*(p.y-p1[1])/(p2[1]-p1[1])+p1[0])){c=!c;}}}return c;};function _24(_25,_26,_27,_28,_29){var _2a=_26.points;var _2b=_25[0];for(var i=0;i<_2a.length;i++){var _2c=_2a[i];if(_a(_2b,_2c,_29)){return true;}if(_2(_2b,_2c,_29)){return true;}}return false;};function _2d(_2e,_2f,_30,_31,_32,_33){var _34=_2e;var _35=_2f;var _36=_32*_31;if(_19(_34,_35,_36)){return true;}};function _37(_38,_39,_3a,_3b){_39=_39.paths;var _3c=_3a.width*_3b/2;for(var i=0;i<_39.length;i++){var _3d=_39[i];for(var k=0;k<_3d.length;k++){if(_2(_38,_3d[k])){return true;}}if(_1d(_38,_3d,_3c)){return true;}}return false;};function _3e(_3f,_40){_40=_40.rings;if(_3f.length===1){return _21(_40,_3f[0]);}for(var m=0;m<_40.length;m++){var _41=_40[m];for(var n=0;n<_41.length;n++){if(_2(_3f,_41[n])){return true;}}}for(var i=0;i<_3f.length;i++){if(_21(_40,_3f[i])){return true;}}for(var k=0;k<_40.length;k++){if(_10(_3f,_40[k])){return true;}}return false;};_1.lineex=_37;_1.polygonex=_3e;_1.pointex=_2d;_1.multipointex=_24;});