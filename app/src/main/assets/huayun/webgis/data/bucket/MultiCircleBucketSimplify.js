//>>built
define("com/huayun/webgis/data/bucket/MultiCircleBucketSimplify",["../ArrayType","../../gl/SegmentVector"],function(_1,_2){function _3(_4,x,y,_5,_6,r,g,b,a){_4.emplaceBack((x*2)+((_5+1)/2),(y*2)+((_6+1)/2),r,g,b,a);};var _7=function _7(_8){this.layoutVertexArray=new _1.StructArrayLayout6fb24();this.indexArray=new _1.StructArrayLayout3ui6();this.segments=new _2();};_7.prototype.destroy=function destroy(){if(!this.layoutVertexBuffer){return;}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.segments.destroy();};_7.prototype.addFeature=function addFeature(_9,_a){for(var _b=0,_c=_9;_b<_c.length;_b+=1){var _d=_c[_b];var _e=_a[_b];for(var i=0,_f=_d;i<_f.length;i+=1){var _10=_f[i];var _11=_e[i];if(_11.length<4){_11.push(1);}var x=_10.x;var y=_10.y;var _12=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);var _13=_12.vertexLength;_3(this.layoutVertexArray,x,y,-1,-1,_11[0],_11[1],_11[2],_11[3]);_3(this.layoutVertexArray,x,y,1,-1,_11[0],_11[1],_11[2],_11[3]);_3(this.layoutVertexArray,x,y,1,1,_11[0],_11[1],_11[2],_11[3]);_3(this.layoutVertexArray,x,y,-1,1,_11[0],_11[1],_11[2],_11[3]);this.indexArray.emplaceBack(_13,_13+1,_13+2);this.indexArray.emplaceBack(_13,_13+3,_13+2);_12.vertexLength+=4;_12.primitiveLength+=2;}}};_7.prototype.upload=function upload(_14){this.layoutVertexBuffer=_14.createVertexBuffer(this.layoutVertexArray,[{name:"a_pos",type:"Float32",components:2,offset:0},{name:"a_color",type:"Float32",components:4,offset:8}]);this.indexBuffer=_14.createIndexBuffer(this.indexArray);};return _7;});