//>>built
define("com/huayun/webgis/data/bucket/RectBucket",["../ArrayType","../../gl/SegmentVector","../../utils/earcut","../../utils/utils","../../utils/Constant"],function(_1,_2,_3,_4,_5){function _6(_7,x,y,w,h,ww,hw){_7.emplaceBack(x,y,w,h,ww,hw);};function _8(){this.layoutVertexArray=new _1.StructArrayLayout6fb24();this.indexArray=new _1.StructArrayLayout3ui6();this.segments=new _2();};_8.prototype.destroy=function destroy(){if(!this.layoutVertexBuffer){return;}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.segments.destroy();};_8.prototype.addFeature=function addFeature(_9,_a){var _b=_a.width,_c=_a.height,_d=_a.widthWithStroke,_e=_a.heightWithStroke;for(var _f=0,_10=_9;_f<_10.length;_f+=1){var _11=_10[_f];for(var i=0,_12=_11;i<_12.length;i+=1){var _13=_12[i];var x=_13.x;var y=_13.y;var _14=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);var _15=_14.vertexLength;_6(this.layoutVertexArray,x,y,-_b,-_c,-_d,-_e);_6(this.layoutVertexArray,x,y,_b,-_c,_d,-_e);_6(this.layoutVertexArray,x,y,_b,_c,_d,_e);_6(this.layoutVertexArray,x,y,-_b,_c,-_d,_e);this.indexArray.emplaceBack(_15,_15+1,_15+2);this.indexArray.emplaceBack(_15,_15+3,_15+2);_14.vertexLength+=4;_14.primitiveLength+=2;}}};_8.prototype.upload=function upload(_16){this.layoutVertexBuffer=_16.createVertexBuffer(this.layoutVertexArray,[{name:"a_pos",type:"Float32",components:2,offset:0},{name:"a_size",type:"Float32",components:4,offset:8}]);this.indexBuffer=_16.createIndexBuffer(this.indexArray);};return _8;});