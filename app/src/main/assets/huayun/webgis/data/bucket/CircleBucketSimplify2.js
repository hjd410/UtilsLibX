//>>built
define("com/huayun/webgis/data/bucket/CircleBucketSimplify2",["../ArrayType","../../gl/SegmentVector"],function(l,m){function d(b,f,g,d,a){b.emplaceBack(2*f+(d+1)/2,2*g+(a+1)/2)}var c=function(b){this.layoutVertexArray=new l.StructArrayLayout2f2ib12;this.indexArray=new l.StructArrayLayout3ui6;this.segments=new m};c.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy())};c.prototype.addFeature=function(b){for(var f=
0;f<b.length;f+=1)for(var g=0,c=b[f];g<c.length;g+=1){var a=c[g],k=a.x,a=a.y,h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),e=h.vertexLength;d(this.layoutVertexArray,k,a,-1,-1);d(this.layoutVertexArray,k,a,1,-1);d(this.layoutVertexArray,k,a,1,1);d(this.layoutVertexArray,k,a,-1,1);this.indexArray.emplaceBack(e,e+1,e+2);this.indexArray.emplaceBack(e,e+3,e+2);h.vertexLength+=4;h.primitiveLength+=2}};c.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,
[{name:"a_pos",type:"Float32",components:2,offset:0},{name:"a_data",type:"Int16",components:2,offset:8}]);this.indexBuffer=b.createIndexBuffer(this.indexArray)};return c});