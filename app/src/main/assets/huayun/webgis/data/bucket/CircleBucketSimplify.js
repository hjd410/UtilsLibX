//>>built
define("com/huayun/webgis/data/bucket/CircleBucketSimplify",["../ArrayType","../../gl/SegmentVector"],function(_1,_2){function _3(_4,x,y,_5,_6){_4.emplaceBack(x,y,_5,_6);};var _7=function _7(_8){this.layoutVertexArray=new _1.StructArrayLayout2f2ib12();this.indexArray=new _1.StructArrayLayout3ui6();this.segments=new _2();};_7.prototype.destroy=function destroy(){if(!this.layoutVertexBuffer){return;}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.segments.destroy();};_7.prototype.addFeature=function addFeature(_9){for(var _a=0,_b=_9;_a<_b.length;_a+=1){var _c=_b[_a];for(var i=0,_d=_c;i<_d.length;i+=1){var _e=_d[i];var x=_e.x;var y=_e.y;var _f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);var _10=_f.vertexLength;_3(this.layoutVertexArray,x,y,-1,-1);_3(this.layoutVertexArray,x,y,1,-1);_3(this.layoutVertexArray,x,y,1,1);_3(this.layoutVertexArray,x,y,-1,1);this.indexArray.emplaceBack(_10,_10+1,_10+2);this.indexArray.emplaceBack(_10,_10+3,_10+2);_f.vertexLength+=4;_f.primitiveLength+=2;}}};_7.prototype.upload=function upload(_11){this.layoutVertexBuffer=_11.createVertexBuffer(this.layoutVertexArray,[{name:"a_pos",type:"Float32",components:2,offset:0},{name:"a_data",type:"Int16",components:2,offset:8}]);this.indexBuffer=_11.createIndexBuffer(this.indexArray);};return _7;});