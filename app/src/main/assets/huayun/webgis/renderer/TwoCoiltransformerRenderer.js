//>>built
define("com/huayun/webgis/renderer/TwoCoiltransformerRenderer","./LineRenderer ./CircleRenderer ../geometry/Point ../geometry/Polyline ../geometry/Multipoint ../utils/MathUtils ../gl/programCache".split(" "),function(x,y,t,w,z,A,B){function n(){this.lineRenderer=new x;this.circleRenderer=new y}n.prototype.add=function(f,a,c,b){for(var d=0;d<b.symbols.length;d++){var e=b.symbols[d];b.minScale&&(e.minScale=b.minScale);b.maxScale&&(e.maxScale=b.maxScale);void 0!==b.isFixed&&(e.isFixed=b.isFixed);b.fixed&&
(e.fixed=b.fixed);b.markerSize&&(e.markerSize=b.markerSize)}var e=c.points,d=e[0],g=e[1],e=d.dist(g),l=e/3.3,h=d.radian(g),g=g.radian(d),m=d.calculateOtherPoint(e,h),k=d.interpolate(m,.5);a.lhRadian=g;a.drawCenterPoint=k;this.calculateDrawPointMethod(e,d,m,k,h,g,l,f,a,c,b)};n.prototype.draw=function(f,a,c,b,d){var e=f.resolution,g=a.ratio,l=b.symbols[1].strokeWidth*g/e;1>l&&(l=1);debugger;b.symbols[0].setWidth(l);this.lineRenderer.draw(f,a,c,b.symbols[0],d,2,!0);l=a.circleRadius/e;1>l&&(l=1);b.symbols[1].setRadius(l);
b.symbols[1].setStrokeWidth(b.symbols[1].strokeWidth*g/e);this.circleRenderer.draw(f,a,c,b.symbols[1],d,0,!0);b.symbols[2].setRadius(l);b.symbols[2].setStrokeWidth(b.symbols[2].strokeWidth*g/e);this.circleRenderer.draw(f,a,c,b.symbols[2],d,1,!0);e=b.symbols[1].color;b.symbols[1].color=[0,0,0,0];this.circleRenderer.draw(f,a,c,b.symbols[1],d,0,!0);b.symbols[1].color=e;e=b.symbols[2].color;b.symbols[2].color=[0,0,0,0];this.circleRenderer.draw(f,a,c,b.symbols[2],d,1,!0);b.symbols[2].color=e;3<a.buckets.length&&
(this.lineRenderer.draw(f,a,c,b.symbols[0],d,3,!0),b.symbols[3].setRadius(a.circleRadius/15),b.symbols[3].setStrokeWidth(b.symbols[3].strokeWidth),this.circleRenderer.draw(f,a,c,b.symbols[3],d,4,!0))};n.prototype.drawGlow=function(f,a,c,b,d){if(a.glow){var e=f.resolution,g=a.ratio,l=b.symbols[1].strokeWidth*g/e;1>l&&(l=1);b.symbols[0].setWidth(l);this.lineRenderer.drawGlow(f,a,c,b.symbols[0],d,2,!0);l=a.circleRadius/e;1>l&&(l=1);b.symbols[1].setRadius(l);b.symbols[1].setStrokeWidth(b.symbols[1].strokeWidth*
g/e);this.circleRenderer.drawGlow(f,a,c,b.symbols[1],d,0,!0);b.symbols[2].setRadius(l);b.symbols[2].setStrokeWidth(b.symbols[2].strokeWidth*g/e);this.circleRenderer.drawGlow(f,a,c,b.symbols[2],d,1,!0);e=b.symbols[1].color;b.symbols[1].color=[0,0,0,0];this.circleRenderer.drawGlow(f,a,c,b.symbols[1],d,0,!0);b.symbols[1].color=e;e=b.symbols[2].color;b.symbols[2].color=[0,0,0,0];this.circleRenderer.drawGlow(f,a,c,b.symbols[2],d,1,!0);b.symbols[2].color=e;this.lineRenderer.drawGlow(f,a,c,b.symbols[0],
d,3,!0)}};n.prototype.calculateDrawPointMethod=function(f,a,c,b,d,e,g,l,h,m,k){m=1.5*g/2;var n=.45*g,p=1.2*g,q=a.calculateOtherPoint(.3*g,d),u=q.calculateOtherPoint(m,d),p=u.calculateOtherPoint(p,d),r=p.calculateOtherPoint(m,d);h.circleRadius=m;h.ratio=g;h.hlConnDis=f;f=l.resolution;k.symbols[2].setRadius(m/f);k.symbols[2].setStrokeWidth(k.symbols[2].strokeWidth*g/f);this.circleRenderer.add(l,h,new t(u.x,u.y),k.symbols[2]);k.symbols[1].setRadius(m/f);k.symbols[1].setStrokeWidth(k.symbols[1].strokeWidth*
g/f);this.circleRenderer.add(l,h,new t(p.x,p.y),k.symbols[1]);r=new w([[a,q],[c,r]]);this.lineRenderer.add(l,h,r,k.symbols[0]);var r=[],v=[];this.drawConectionTypeMethod(k,r,a,q,u,c,p,b,m,d,e,n,g,v);this.lineRenderer.add(l,h,new w(r),k.symbols[0]);0<v.length&&(k.symbols[3].setRadius(h.circleRadius/f),k.symbols[3].setStrokeWidth(k.symbols[3].strokeWidth/f),this.circleRenderer.add(l,h,new z(v),k.symbols[3]))};n.prototype.drawConectionTypeMethod=function(f,a,c,b,d,e,g,l,h,m,k,n,p,q){switch(f.hConnMode){case "Y":b=
g.calculateOtherPoint(h,k);this.drawStarMethod(a,d,b,m,k);break;case "D":this.drawTriangleMethod(a,d,h,m,k);break;case "Z":this.drawCirCuitousMethod(a,d,h,m,k);break;case "YN":b=g.calculateOtherPoint(h,k);this.drawStarMethod(a,d,b,m,k);this.drawNeutralPointMethod(a,c,d,h,q);break;case "ZN":this.drawCirCuitousMethod(a,d,h,m,k),this.drawNeutralPointMethod(a,c,d,h,q)}switch(f.lConnMode){case "y":d=g.calculateOtherPoint(n,m);this.drawStarMethod(a,g,d,m,k);break;case "d":this.drawTriangleMethod(a,g,h,
m,k);break;case "z":this.drawCirCuitousMethod(a,g,h,m,k);break;case "yn":d=g.calculateOtherPoint(n,m);this.drawStarMethod(a,g,d,m,k);this.drawNeutralPointMethod(a,c,g,h,q);break;case "zn":this.drawCirCuitousMethod(a,g,h,m,k),this.drawNeutralPointMethod(a,e,g,h,q)}f.onLoad&&this.drawOnLoadMethod(a,l,h,m,k,p);f.tapSwitch&&this.drawTapSwitchMethod(a,l,h,m,k,p)};n.prototype.drawStarMethod=function(f,a,c,b,d){var e=a.dist(c);b=e*Math.sqrt(3)/2;d=a.calculateOtherPoint(.5*e,d);e=a.calculateOtherPoint2(d,
b).calculateOtherPoint2(a,.5*e);b=d.calculateOtherPoint2(a,b);f.push([a,c]);f.push([a,e]);f.push([a,b])};n.prototype.drawTriangleMethod=function(f,a,c,b,d){c=c*Math.sqrt(3)/3;var e=c*Math.sqrt(3)/2;d=a.calculateOtherPoint(c,d);var g=a.calculateOtherPoint(.5*c,b);b=g.calculateOtherPoint2(a,e);a=a.calculateOtherPoint2(g,e).calculateOtherPoint2(a,.5*c);f.push([d,b,a,d])};n.prototype.drawNeutralPointMethod=function(f,a,c,b,d){b=2*b/5;d.push(new t(c.x,c.y));a=c.calculateOtherPoint2(a,b);f.push([c,a])};
n.prototype.drawOnLoadMethod=function(f,a,c,b,d,e){c=.675*e;b=a.calculateOtherPoint(c,180+b);b=a.calculateOtherPoint2(b,c*Math.sqrt(3)).calculateOtherPoint2(a,c);e=b.radian(a);d=2*c;c=a.calculateOtherPoint(d,e);e=a.calculateOtherPoint(.7*d,e);a=e.calculateOtherPoint2(c,.04*d);d=c.calculateOtherPoint2(e,.04*d).calculateOtherPoint2(c,.3*d);f.push([b,c]);f.push([c,d,a,c])};n.prototype.drawCirCuitousMethod=function(f,a,c,b,d){c=2*c/5;var e=c*Math.sqrt(3)/2;d=a.calculateOtherPoint(c,d);var g=a.calculateOtherPoint(.5*
c,b),l=g.calculateOtherPoint3(a,e),h=a.calculateOtherPoint3(g,e).calculateOtherPoint3(a,.5*c),m=a.calculateOtherPoint3(d,e).calculateOtherPoint3(a,c).calculateOtherPoint3(d,.5*c);b=a.calculateOtherPoint(1.5*c,b).calculateOtherPoint3(g,e);g=g.dist(h);g=h.calculateOtherPoint(e,g);c=h.calculateOtherPoint2(g,.5*c).calculateOtherPoint3(h,e);f.push([a,d,m]);f.push([a,l,b]);f.push([a,h,c])};n.prototype.drawTapSwitchMethod=function(f,a,c,b,d,e){var g=1.65*e;c=.15*e;d=.3*e;e=a.calculateOtherPoint(.45*e,-b).calculateOtherPoint2(a,
g);a=e.calculateOtherPoint(c,-b);d=e.calculateOtherPoint2(a,d).calculateOtherPoint2(e,c);c=d.calculateOtherPoint(c,-b);b=new t(e.x,c.y);c=new t(c.x,e.y);f.push([b,a,d,c])};n.prototype.calculateExtent=function(f,a,c,b,d){f=a.circleRadius;c=a.hlConnDis/2;f=A.sizeAfterRotated([{x:c,y:f},{x:c,y:-f},{x:-c,y:-f},{x:-c,y:f}],a.lhRadian);c=a.drawCenterPoint;d.push({id:a.id,g:a,minX:c.x+f.xmin,minY:c.y+f.ymin,maxX:c.x+f.xmax,maxY:c.y+f.ymax})};return n});